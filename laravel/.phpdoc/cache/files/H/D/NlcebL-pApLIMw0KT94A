1711241706
waR3U4bTeM%3A94b697e3400b19239be473b14e65f791-abc81d6ea65d2ce1abd492719933ce8f
s:12660:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImFiYzgxZDZlYTY1ZDJjZTFhYmQ0OTI3MTk5MzNjZThmIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MjI6ImZvcm1fY29udGVudC5ibGFkZS5waHAiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czo2ODoidmVuZG9yL2JhY2twYWNrL2NydWQvc3JjL3Jlc291cmNlcy92aWV3cy9jcnVkL2Zvcm1fY29udGVudC5ibGFkZS5waHAiO3M6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAc291cmNlIjtzOjg1Mzc6IjxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Il9odHRwX3JlZmVycmVyIiB2YWx1ZT17eyBzZXNzaW9uKCdyZWZlcnJlcl91cmxfb3ZlcnJpZGUnKSA/PyBvbGQoJ19odHRwX3JlZmVycmVyJykgPz8gXFVSTDo6cHJldmlvdXMoKSA/PyB1cmwoJGNydWQtPnJvdXRlKSB9fT4KCnt7LS0gU2VlIGlmIHdlJ3JlIHVzaW5nIHRhYnMgLS19fQpAaWYgKCRjcnVkLT50YWJzRW5hYmxlZCgpICYmIGNvdW50KCRjcnVkLT5nZXRUYWJzKCkpKQogICAgQGluY2x1ZGUoJ2NydWQ6OmluYy5zaG93X3RhYmJlZF9maWVsZHMnKQogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iX2N1cnJlbnRfdGFiIiB2YWx1ZT0ie3sgU3RyOjpzbHVnKCRjcnVkLT5nZXRUYWJzKClbMF0pIH19IiAvPgpAZWxzZQogIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5IHJvdyI+CiAgICAgIEBpbmNsdWRlKCdjcnVkOjppbmMuc2hvd19maWVsZHMnLCBbJ2ZpZWxkcycgPT4gJGNydWQtPmZpZWxkcygpXSkKICAgIDwvZGl2PgogIDwvZGl2PgpAZW5kaWYKCgp7ey0tIERlZmluZSBibGFkZSBzdGFja3Mgc28gY3NzIGFuZCBqcyBjYW4gYmUgcHVzaGVkIGZyb20gdGhlIGZpZWxkcyB0byB0aGVzZSBzZWN0aW9ucy4gLS19fQoKQHNlY3Rpb24oJ2FmdGVyX3N0eWxlcycpCgogICAge3stLSBDUlVEIEZPUk0gQ09OVEVOVCAtIGNydWRfZmllbGRzX3N0eWxlcyBzdGFjayAtLX19CiAgICBAc3RhY2soJ2NydWRfZmllbGRzX3N0eWxlcycpCgpAZW5kc2VjdGlvbgoKQHNlY3Rpb24oJ2FmdGVyX3NjcmlwdHMnKQoKICAgIHt7LS0gQ1JVRCBGT1JNIENPTlRFTlQgLSBjcnVkX2ZpZWxkc19zY3JpcHRzIHN0YWNrIC0tfX0KICAgIEBzdGFjaygnY3J1ZF9maWVsZHNfc2NyaXB0cycpCgogICAgPHNjcmlwdD4KICAgIGZ1bmN0aW9uIGluaXRpYWxpemVGaWVsZHNXaXRoSmF2YXNjcmlwdChjb250YWluZXIpIHsKICAgICAgdmFyIHNlbGVjdG9yOwogICAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgalF1ZXJ5KSB7CiAgICAgICAgc2VsZWN0b3IgPSBjb250YWluZXI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZWN0b3IgPSAkKGNvbnRhaW5lcik7CiAgICAgIH0KICAgICAgc2VsZWN0b3IuZmluZCgiW2RhdGEtaW5pdC1mdW5jdGlvbl0iKS5ub3QoIltkYXRhLWluaXRpYWxpemVkPXRydWVdIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSAkKHRoaXMpOwogICAgICAgIHZhciBmdW5jdGlvbk5hbWUgPSBlbGVtZW50LmRhdGEoJ2luaXQtZnVuY3Rpb24nKTsKCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3dbZnVuY3Rpb25OYW1lXSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgd2luZG93W2Z1bmN0aW9uTmFtZV0oZWxlbWVudCk7CgogICAgICAgICAgLy8gbWFyayB0aGUgZWxlbWVudCBhcyBpbml0aWFsaXplZCwgc28gdGhhdCBpdHMgZnVuY3Rpb24gaXMgbmV2ZXIgY2FsbGVkIGFnYWluCiAgICAgICAgICBlbGVtZW50LmF0dHIoJ2RhdGEtaW5pdGlhbGl6ZWQnLCAndHJ1ZScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBdXRvLWRpc2NvdmVyIGZpcnN0IGZvY3VzYWJsZSBpbnB1dAogICAgICogQHBhcmFtIHtqUXVlcnl9IGZvcm0KICAgICAqIEByZXR1cm4ge2pRdWVyeX0KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0Rmlyc3RGb2N1c2FibGVGaWVsZChmb3JtKSB7CiAgICAgICAgcmV0dXJuIGZvcm0uZmluZCgnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGJ1dHRvbicpCiAgICAgICAgICAgIC5ub3QoJy5jbG9zZScpCiAgICAgICAgICAgIC5ub3QoJ1tkaXNhYmxlZF0nKQogICAgICAgICAgICAuZmlsdGVyKCc6dmlzaWJsZTpmaXJzdCcpOwogICAgfQoKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBmaXJzdEZpZWxkCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRyaWdnZXJGb2N1c09uRmlyc3RJbnB1dEZpZWxkKGZpcnN0RmllbGQpIHsKICAgICAgICBpZiAoZmlyc3RGaWVsZC5oYXNDbGFzcygnc2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZScpKSB7CiAgICAgICAgICAgIHJldHVybiBoYW5kbGVGb2N1c09uU2VsZWN0MkZpZWxkKGZpcnN0RmllbGQpOwogICAgICAgIH0KCiAgICAgICAgZmlyc3RGaWVsZC50cmlnZ2VyKCdmb2N1cycpOwogICAgfQoKICAgIC8qKgogICAgICogMS0gTWFrZSBzdXJlIG5vIG90aGVyIHNlbGVjdDIgaW5wdXQgaXMgb3BlbiBpbiBvdGhlciBmaWVsZCB0byBmb2N1cyBvbiB0aGUgcmlnaHQgb25lCiAgICAgKiAyLSBDaGVjayB1bnRpbCBzZWxlY3QyIGlzIGluaXRpYWxpemVkCiAgICAgKiAzLSBPcGVuIHNlbGVjdDIKICAgICAqCiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gZmlyc3RGaWVsZAogICAgICovCiAgICBmdW5jdGlvbiBoYW5kbGVGb2N1c09uU2VsZWN0MkZpZWxkKGZpcnN0RmllbGQpewogICAgICAgIGZpcnN0RmllbGQuc2VsZWN0MignZm9jdXMnKTsKICAgIH0KCiAgICAvKgogICAgKiBIYWNreSBmaXggZm9yIGEgYnVnIGluIHNlbGVjdDIgd2l0aCBqUXVlcnkgMy42LjAncyBuZXcgbmVzdGVkLWZvY3VzICJwcm90ZWN0aW9uIgogICAgKiBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zZWxlY3QyL3NlbGVjdDIvaXNzdWVzLzU5OTMKICAgICogc2VlOiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9pc3N1ZXMvNDM4MgogICAgKgogICAgKi8KICAgICQoZG9jdW1lbnQpLm9uKCdzZWxlY3QyOm9wZW4nLCAoKSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0Mi1jb250YWluZXItLW9wZW4gLnNlbGVjdDItc2VhcmNoX19maWVsZCcpLmZvY3VzKCksIDEwMCk7CiAgICB9KTsKCiAgICBqUXVlcnkoJ2RvY3VtZW50JykucmVhZHkoZnVuY3Rpb24oJCl7CgogICAgICAvLyB0cmlnZ2VyIHRoZSBqYXZhc2NyaXB0IGZvciBhbGwgZmllbGRzIHRoYXQgaGF2ZSB0aGVpciBqcyBkZWZpbmVkIGluIGEgc2VwYXJhdGUgbWV0aG9kCiAgICAgIGluaXRpYWxpemVGaWVsZHNXaXRoSmF2YXNjcmlwdCgnZm9ybScpOwoKICAgICAgLy8gUmV0cmlldmVzIHRoZSBjdXJyZW50IGZvcm0gZGF0YQogICAgICBmdW5jdGlvbiBnZXRGb3JtRGF0YSgpIHsKICAgICAgICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgRm9ybURhdGEoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibWFpbiBmb3JtIikpKS50b1N0cmluZygpOwogICAgICB9CgogICAgICAvLyBQcmV2ZW50cyB1bmxvYWRpbmcgb2YgcGFnZSBpZiBmb3JtIGRhdGEgd2FzIGNoYW5nZWQKICAgICAgZnVuY3Rpb24gcHJldmVudFVubG9hZChldmVudCkgewogICAgICAgIGlmIChpbml0RGF0YSAhPT0gZ2V0Rm9ybURhdGEoKSkgewogICAgICAgICAgLy8gQ2FuY2VsIHRoZSBldmVudCBhcyBzdGF0ZWQgYnkgdGhlIHN0YW5kYXJkLgogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIC8vIE9sZGVyIGJyb3dzZXJzIHN1cHBvcnRlZCBjdXN0b20gbWVzc2FnZQogICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSAnJzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIEBpZigkY3J1ZC0+Z2V0T3BlcmF0aW9uU2V0dGluZygnd2FybkJlZm9yZUxlYXZpbmcnKSkKICAgICAgY29uc3QgaW5pdERhdGEgPSBnZXRGb3JtRGF0YSgpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgcHJldmVudFVubG9hZCk7CiAgICAgIEBlbmRpZgoKICAgICAgLy8gU2F2ZSBidXR0b24gaGFzIG11bHRpcGxlIGFjdGlvbnM6IHNhdmUgYW5kIGV4aXQsIHNhdmUgYW5kIGVkaXQsIHNhdmUgYW5kIG5ldwogICAgICB2YXIgc2F2ZUFjdGlvbnMgPSAkKCcjc2F2ZUFjdGlvbnMnKSwKICAgICAgY3J1ZEZvcm0gICAgICAgID0gc2F2ZUFjdGlvbnMucGFyZW50cygnZm9ybScpLAogICAgICBzYXZlQWN0aW9uRmllbGQgPSAkKCdbbmFtZT0iX3NhdmVfYWN0aW9uIl0nKTsKCiAgICAgIHNhdmVBY3Rpb25zLm9uKCdjbGljaycsICcuZHJvcGRvd24tbWVudSBhJywgZnVuY3Rpb24oKXsKICAgICAgICAgIHZhciBzYXZlQWN0aW9uID0gJCh0aGlzKS5kYXRhKCd2YWx1ZScpOwogICAgICAgICAgc2F2ZUFjdGlvbkZpZWxkLnZhbCggc2F2ZUFjdGlvbiApOwogICAgICAgICAgY3J1ZEZvcm0uc3VibWl0KCk7CiAgICAgIH0pOwoKICAgICAgLy8gQ3RybCtTIGFuZCBDbWQrUyB0cmlnZ2VyIFNhdmUgYnV0dG9uIGNsaWNrCiAgICAgICQoZG9jdW1lbnQpLmtleWRvd24oZnVuY3Rpb24oZSkgewogICAgICAgICAgaWYgKChlLndoaWNoID09ICcxMTUnIHx8IGUud2hpY2ggPT0gJzgzJyApICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkKICAgICAgICAgIHsKICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgJCgiYnV0dG9uW3R5cGU9c3VibWl0XSIpLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0pOwoKICAgICAgLy8gcHJldmVudCBkdXBsaWNhdGUgZW50cmllcyBvbiBkb3VibGUtY2xpY2tpbmcgdGhlIHN1Ym1pdCBmb3JtCiAgICAgIGNydWRGb3JtLnN1Ym1pdChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgcHJldmVudFVubG9hZCk7CiAgICAgICAgJCgiYnV0dG9uW3R5cGU9c3VibWl0XSIpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7CiAgICAgIH0pOwoKICAgICAgLy8gUGxhY2UgdGhlIGZvY3VzIG9uIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBmb3JtCiAgICAgIEBpZiggJGNydWQtPmdldEF1dG9Gb2N1c09uRmlyc3RGaWVsZCgpICkKICAgICAgICBAcGhwCiAgICAgICAgICAkZm9jdXNGaWVsZCA9IEFycjo6Zmlyc3QoJGZpZWxkcywgZnVuY3Rpb24oJGZpZWxkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGlzc2V0KCRmaWVsZFsnYXV0b19mb2N1cyddKSAmJiAkZmllbGRbJ2F1dG9fZm9jdXMnXSA9PSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgQGVuZHBocAoKICAgICAgICBsZXQgZm9jdXNGaWVsZDsKCiAgICAgICAgQGlmICgkZm9jdXNGaWVsZCkKICAgICAgICAgIEBwaHAKICAgICAgICAgICAgJGZvY3VzRmllbGROYW1lID0gaXNzZXQoJGZvY3VzRmllbGRbJ3ZhbHVlJ10pICYmIGlzX2l0ZXJhYmxlKCRmb2N1c0ZpZWxkWyd2YWx1ZSddKSA/ICRmb2N1c0ZpZWxkWyduYW1lJ10gLiAnW10nIDogJGZvY3VzRmllbGRbJ25hbWUnXTsKICAgICAgICAgIEBlbmRwaHAKICAgICAgICAgICAgZm9jdXNGaWVsZCA9ICQoJ1tuYW1lPSJ7eyAkZm9jdXNGaWVsZE5hbWUgfX0iXScpLmVxKDApOwogICAgICAgIEBlbHNlCiAgICAgICAgICAgIGZvY3VzRmllbGQgPSBnZXRGaXJzdEZvY3VzYWJsZUZpZWxkKCQoJ2Zvcm0nKSk7CiAgICAgICAgQGVuZGlmCgogICAgICAgIGNvbnN0IGZpZWxkT2Zmc2V0ID0gZm9jdXNGaWVsZC5vZmZzZXQoKS50b3A7CiAgICAgICAgY29uc3Qgc2Nyb2xsVG9sZXJhbmNlID0gJCh3aW5kb3cpLmhlaWdodCgpIC8gMjsKCiAgICAgICAgdHJpZ2dlckZvY3VzT25GaXJzdElucHV0RmllbGQoZm9jdXNGaWVsZCk7CgogICAgICAgIGlmKCBmaWVsZE9mZnNldCA+IHNjcm9sbFRvbGVyYW5jZSApewogICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAoZmllbGRPZmZzZXQgLSAzMCl9KTsKICAgICAgICB9CiAgICAgIEBlbmRpZgoKICAgICAgLy8gQWRkIGlubGluZSBlcnJvcnMgdG8gdGhlIERPTQogICAgICBAaWYgKCRjcnVkLT5pbmxpbmVFcnJvcnNFbmFibGVkKCkgJiYgc2Vzc2lvbigpLT5nZXQoJ2Vycm9ycycpKQoKICAgICAgICB3aW5kb3cuZXJyb3JzID0geyEhIGpzb25fZW5jb2RlKHNlc3Npb24oKS0+Z2V0KCdlcnJvcnMnKS0+Z2V0QmFncygpKSAhIX07CgogICAgICAgICQuZWFjaChlcnJvcnMsIGZ1bmN0aW9uKGJhZywgZXJyb3JNZXNzYWdlcyl7CiAgICAgICAgICAkLmVhY2goZXJyb3JNZXNzYWdlcywgIGZ1bmN0aW9uIChpbnB1dE5hbWUsIG1lc3NhZ2VzKSB7CiAgICAgICAgICAgIHZhciBub3JtYWxpemVkUHJvcGVydHkgPSBpbnB1dE5hbWUuc3BsaXQoJy4nKS5tYXAoZnVuY3Rpb24oaXRlbSwgaW5kZXgpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCA9PT0gMCA/IGl0ZW0gOiAnWycraXRlbSsnXSc7CiAgICAgICAgICAgICAgICB9KS5qb2luKCcnKTsKCiAgICAgICAgICAgIHZhciBmaWVsZCA9ICQoJ1tuYW1lPSInICsgbm9ybWFsaXplZFByb3BlcnR5ICsgJ1tdIl0nKS5sZW5ndGggPwogICAgICAgICAgICAgICAgICAgICAgICAkKCdbbmFtZT0iJyArIG5vcm1hbGl6ZWRQcm9wZXJ0eSArICdbXSJdJykgOgogICAgICAgICAgICAgICAgICAgICAgICAkKCdbbmFtZT0iJyArIG5vcm1hbGl6ZWRQcm9wZXJ0eSArICciXScpLAogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIgPSBmaWVsZC5wYXJlbnQoJy5mb3JtLWdyb3VwJyk7CiAgICAgICAgICAKICAgICAgICAgICAgLy8gaXRlcmF0ZSB0aGUgaW5wdXRzIHRvIGFkZCBpbnZhbGlkIGNsYXNzZXMgdG8gZmllbGRzIGFuZCByZWQgdGV4dCB0byB0aGUgZmllbGQgY29udGFpbmVyLgogICAgICAgICAgICBjb250YWluZXIuY2hpbGRyZW4oJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0JykuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGxldCBjb250YWluZXJGaWVsZCA9ICQodGhpcyk7CiAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGludmFsaWRhIGNsYXNzIHRvIHRoZSBmaWVsZC4KICAgICAgICAgICAgICAgIGNvbnRhaW5lckZpZWxkLmFkZENsYXNzKCdpcy1pbnZhbGlkJyk7CiAgICAgICAgICAgICAgICAvLyBnZXQgZmllbGQgY29udGFpbmVyCiAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyID0gY29udGFpbmVyRmllbGQucGFyZW50KCcuZm9ybS1ncm91cCcpOwoKICAgICAgICAgICAgICAgIC8vIFRPRE86IGByZXBlYXRhYmxlLWdyb3VwYCBzaG91bGQgYmUgZGVwcmVjYXRlZCBpbiBmdXR1cmUgdmVyc2lvbiBhcyBhIEJDIGluIGZhdm9yIG9mIGEgbW9yZSBnZW5lcmljIGNsYXNzIGBuby1lcnJvci1kaXNwbGF5YAogICAgICAgICAgICAgICAgaWYoIWNvbnRhaW5lci5oYXNDbGFzcygncmVwZWF0YWJsZS1ncm91cCcpICYmICFjb250YWluZXIuaGFzQ2xhc3MoJ25vLWVycm9yLWRpc3BsYXknKSl7CiAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygndGV4dC1kYW5nZXInKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkLmVhY2gobWVzc2FnZXMsIGZ1bmN0aW9uKGtleSwgbXNnKXsKICAgICAgICAgICAgICAgIC8vIGhpZ2hsaWdodCB0aGUgaW5wdXQgdGhhdCBlcnJvcmVkCiAgICAgICAgICAgICAgICB2YXIgcm93ID0gJCgnPGRpdiBjbGFzcz0iaW52YWxpZC1mZWVkYmFjayBkLWJsb2NrIj4nICsgbXNnICsgJzwvZGl2PicpOwoKICAgICAgICAgICAgICAgIC8vIFRPRE86IGByZXBlYXRhYmxlLWdyb3VwYCBzaG91bGQgYmUgZGVwcmVjYXRlZCBpbiBmdXR1cmUgdmVyc2lvbiBhcyBhIEJDIGluIGZhdm9yIG9mIGEgbW9yZSBnZW5lcmljIGNsYXNzIGBuby1lcnJvci1kaXNwbGF5YAogICAgICAgICAgICAgICAgaWYoIWNvbnRhaW5lci5oYXNDbGFzcygncmVwZWF0YWJsZS1ncm91cCcpICYmICFjb250YWluZXIuaGFzQ2xhc3MoJ25vLWVycm9yLWRpc3BsYXknKSl7CiAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRUbyhjb250YWluZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IGl0cyBwYXJlbnQgdGFiCiAgICAgICAgICAgICAgICBAaWYgKCRjcnVkLT50YWJzRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgdmFyIHRhYl9pZCA9ICQoY29udGFpbmVyKS5jbG9zZXN0KCdbcm9sZT0idGFicGFuZWwiXScpLmF0dHIoJ2lkJyk7CiAgICAgICAgICAgICAgICAkKCIjZm9ybV90YWJzIFthcmlhLWNvbnRyb2xzPSIrdGFiX2lkKyJdIikuYWRkQ2xhc3MoJ3RleHQtZGFuZ2VyJyk7CiAgICAgICAgICAgICAgICBAZW5kaWYKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBAZW5kaWYKCiAgICAgICQoImFbZGF0YS10b2dnbGU9J3RhYiddIikuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgIGN1cnJlbnRUYWJOYW1lID0gJCh0aGlzKS5hdHRyKCd0YWJfbmFtZScpOwogICAgICAgICAgJCgiaW5wdXRbbmFtZT0nX2N1cnJlbnRfdGFiJ10iKS52YWwoY3VycmVudFRhYk5hbWUpOwogICAgICB9KTsKCiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCkgewogICAgICAgICAgJCgiaW5wdXRbbmFtZT0nX2N1cnJlbnRfdGFiJ10iKS52YWwod2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyKDEpKTsKICAgICAgfQogICAgICB9KTsKICAgIDwvc2NyaXB0PgoKICAgIEBpbmNsdWRlKCdjcnVkOjppbmMuZm9ybV9maWVsZHNfc2NyaXB0JykKQGVuZHNlY3Rpb24KIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";