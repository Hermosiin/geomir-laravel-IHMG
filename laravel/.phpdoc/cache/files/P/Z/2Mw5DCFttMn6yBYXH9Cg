1711241703
waR3U4bTeM%3Aabb9b69cd38039e5150f79ff7ca92a60-7e6cd42a7b9c65c12c6079581b42c984
s:26896:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjdlNmNkNDJhN2I5YzY1YzEyYzYwNzk1ODFiNDJjOTg0IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6NDQ6ImNhOWM3MTk0ZTQ2NzZlZDM5NWY1NTM0ZWE4OTRkNDM5OGJiYTBjMTUucGhwIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6Njg6InN0b3JhZ2UvZnJhbWV3b3JrL3ZpZXdzL2NhOWM3MTk0ZTQ2NzZlZDM5NWY1NTM0ZWE4OTRkNDM5OGJiYTBjMTUucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czoxOTE4OToiIDw/cGhwCiAgICAvLyBhcyBpdCBpcyBwb3NzaWJsZSB0aGF0IHdlIGNhbiBiZSByZWRpcmVjdGVkIHdpdGggcGVyc2lzdGVudCB0YWJsZSB3ZSBzYXZlIHRoZSBhbGVydHMgaW4gYSB2YXJpYWJsZQogICAgLy8gYW5kIGZsdXNoIHRoZW0gZnJvbSBzZXNzaW9uLCBzbyB3ZSB3aWxsIGdldCB0aGVtIGxhdGVyIGZyb20gbG9jYWxTdG9yYWdlLgogICAgJGJhY2twYWNrX2FsZXJ0cyA9IFxBbGVydDo6Z2V0TWVzc2FnZXMoKTsKICAgIFxBbGVydDo6Zmx1c2goKTsKID8+CgogIAogIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ijw/cGhwIGVjaG8gZShhc3NldCgncGFja2FnZXMvZGF0YXRhYmxlcy5uZXQvanMvanF1ZXJ5LmRhdGFUYWJsZXMubWluLmpzJykpOyA/PiI+PC9zY3JpcHQ+CiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iPD9waHAgZWNobyBlKGFzc2V0KCdwYWNrYWdlcy9kYXRhdGFibGVzLm5ldC1iczQvanMvZGF0YVRhYmxlcy5ib290c3RyYXA0Lm1pbi5qcycpKTsgPz4iPjwvc2NyaXB0PgogIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ijw/cGhwIGVjaG8gZShhc3NldCgncGFja2FnZXMvZGF0YXRhYmxlcy5uZXQtcmVzcG9uc2l2ZS9qcy9kYXRhVGFibGVzLnJlc3BvbnNpdmUubWluLmpzJykpOyA/PiI+PC9zY3JpcHQ+CiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iPD9waHAgZWNobyBlKGFzc2V0KCdwYWNrYWdlcy9kYXRhdGFibGVzLm5ldC1yZXNwb25zaXZlLWJzNC9qcy9yZXNwb25zaXZlLmJvb3RzdHJhcDQubWluLmpzJykpOyA/PiI+PC9zY3JpcHQ+CiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iPD9waHAgZWNobyBlKGFzc2V0KCdwYWNrYWdlcy9kYXRhdGFibGVzLm5ldC1maXhlZGhlYWRlci9qcy9kYXRhVGFibGVzLmZpeGVkSGVhZGVyLm1pbi5qcycpKTsgPz4iPjwvc2NyaXB0PgogIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ijw/cGhwIGVjaG8gZShhc3NldCgncGFja2FnZXMvZGF0YXRhYmxlcy5uZXQtZml4ZWRoZWFkZXItYnM0L2pzL2ZpeGVkSGVhZGVyLmJvb3RzdHJhcDQubWluLmpzJykpOyA/PiI+PC9zY3JpcHQ+CgogIDxzY3JpcHQ+CiAgICAvLyBoZXJlIHdlIHdpbGwgY2hlY2sgaWYgdGhlIGNhY2hlZCBkYXRhVGFibGVzIHBhZ2luYXRvciBsZW5ndGggaXMgY29uZm9ybWFibGUgd2l0aCBjdXJyZW50IHBhZ2luYXRvciBzZXR0aW5ncy4KICAgIC8vIGRhdGF0YWJsZXMgY2FjaGVzIHRoZSBhamF4IHJlc3BvbnNlcyB3aXRoIHBhZ2VMZW5ndGggaW4gTG9jYWxTdG9yYWdlIHNvIHdoZW4gY2hhbmdpbmcgdGhpcwogICAgLy8gc2V0dGluZ3MgaW4gY29udHJvbGxlciB1c2VycyBnZXQgdW5leHBlY3RlZCByZXN1bHRzLiBUbyBhdm9pZCB0aGF0IHdlIHdpbGwgcmVzZXQKICAgIC8vIHRoZSB0YWJsZSBjYWNoZSB3aGVuIGJvdGggbGVuZ3RocyBkb24ndCBtYXRjaC4KICAgIGxldCAkZHRDYWNoZWRJbmZvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRGF0YVRhYmxlc19jcnVkVGFibGVfLzw/cGhwIGVjaG8gZSgkY3J1ZC0+Z2V0Um91dGUoKSk7ID8+JykpCiAgICAgICAgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdEYXRhVGFibGVzX2NydWRUYWJsZV8vPD9waHAgZWNobyBlKCRjcnVkLT5nZXRSb3V0ZSgpKTsgPz4nKSkgOiBbXTsKICAgIHZhciAkZHREZWZhdWx0UGFnZUxlbmd0aCA9IDw/cGhwIGVjaG8gZSgkY3J1ZC0+Z2V0RGVmYXVsdFBhZ2VMZW5ndGgoKSk7ID8+OwogICAgbGV0ICRkdFN0b3JlZFBhZ2VMZW5ndGggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRGF0YVRhYmxlc19jcnVkVGFibGVfLzw/cGhwIGVjaG8gZSgkY3J1ZC0+Z2V0Um91dGUoKSk7ID8+X3BhZ2VMZW5ndGgnKTsKCiAgICBpZighJGR0U3RvcmVkUGFnZUxlbmd0aCAmJiAkZHRDYWNoZWRJbmZvLmxlbmd0aCAhPT0gMCAmJiAkZHRDYWNoZWRJbmZvLmxlbmd0aCAhPT0gJGR0RGVmYXVsdFBhZ2VMZW5ndGgpIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnRGF0YVRhYmxlc19jcnVkVGFibGVfLzw/cGhwIGVjaG8gZSgkY3J1ZC0+Z2V0Um91dGUoKSk7ID8+Jyk7CiAgICB9CgogICAgLy8gaW4gdGhpcyBwYWdlIHdlIGFsbHdheXMgcGFzcyB0aGUgYWxlcnRzIHRvIGxvY2FsU3RvcmFnZSBiZWNhdXNlIHdlIGNhbiBiZSByZWRpcmVjdGVkIHdpdGgKICAgIC8vIHBlcnNpc3RlbnQgdGFibGUsIGFuZCB0aGlzIHdheSB3ZSBndWFyYW50ZWUgbm9uLWR1cGxpY2F0ZSBhbGVydHMuCiAgICAkb2xkQWxlcnRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmFja3BhY2tfYWxlcnRzJykpCiAgICAgICAgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiYWNrcGFja19hbGVydHMnKSkgOiB7fTsKCiAgICAkbmV3QWxlcnRzID0gPD9waHAgZWNobyBqc29uX2VuY29kZSgkYmFja3BhY2tfYWxlcnRzLCAxNSwgNTEyKSA/PjsKCiAgICBPYmplY3QuZW50cmllcygkbmV3QWxlcnRzKS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUpIHsKICAgICAgICBpZih0eXBlb2YgJG9sZEFsZXJ0c1t0eXBlWzBdXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgdHlwZVsxXS5mb3JFYWNoKGZ1bmN0aW9uKG1zZykgewogICAgICAgICAgICAgICAgJG9sZEFsZXJ0c1t0eXBlWzBdXS5wdXNoKG1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRvbGRBbGVydHNbdHlwZVswXV0gPSB0eXBlWzFdOwogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIGFsd2F5cyBzdG9yZSB0aGUgYWxlcnRzIGluIGxvY2FsU3RvcmFnZSBmb3IgdGhpcyBwYWdlCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmFja3BhY2tfYWxlcnRzJywgSlNPTi5zdHJpbmdpZnkoJG9sZEFsZXJ0cykpOwoKICAgIDw/cGhwIGlmKCRjcnVkLT5nZXRQZXJzaXN0ZW50VGFibGUoKSk6ID8+CgogICAgICAgIHZhciBzYXZlZF9saXN0X3VybCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCc8P3BocCBlY2hvIGUoU3RyOjpzbHVnKCRjcnVkLT5nZXRSb3V0ZSgpKSk7ID8+X2xpc3RfdXJsJyk7CgogICAgICAgIC8vY2hlY2sgaWYgc2F2ZWQgdXJsIGhhcyBhbnkgcGFyYW1ldGVyIG9yIGlzIGVtcHR5IGFmdGVyIGNsZWFyaW5nIGZpbHRlcnMuCiAgICAgICAgaWYgKHNhdmVkX2xpc3RfdXJsICYmIHNhdmVkX2xpc3RfdXJsLmluZGV4T2YoJz8nKSA8IDEpIHsKICAgICAgICAgICAgdmFyIHNhdmVkX2xpc3RfdXJsID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHBlcnNpc3RlbnRVcmwgPSBzYXZlZF9saXN0X3VybCsnJnBlcnNpc3RlbnQtdGFibGU9dHJ1ZSc7CiAgICAgICAgfQoKICAgIHZhciBhcnIgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnPycpOwogICAgLy8gY2hlY2sgaWYgdXJsIGhhcyBwYXJhbWV0ZXJzLgogICAgaWYgKGFyci5sZW5ndGggPiAxICYmIGFyclsxXSAhPT0gJycpIHsKICAgICAgICAvLyBJVCBIQVMhIENoZWNrIGlmIGl0IGlzIG91ciBvd24gcGVyc2lzdGVuY2UgcmVkaXJlY3QuCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZigncGVyc2lzdGVudC10YWJsZT10cnVlJykgPCAxKSB7CiAgICAgICAgICAgIC8vIElGIE5PVDogd2UgZG9uJ3Qgd2FudCB0byByZWRpcmVjdCB0aGUgdXNlci4KICAgICAgICAgICAgc2F2ZWRfbGlzdF91cmwgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgPD9waHAgaWYoJGNydWQtPmdldFBlcnNpc3RlbnRUYWJsZUR1cmF0aW9uKCkpOiA/PgogICAgICAgIHZhciBzYXZlZF9saXN0X3VybF90aW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJzw/cGhwIGVjaG8gZShTdHI6OnNsdWcoJGNydWQtPmdldFJvdXRlKCkpKTsgPz5fbGlzdF91cmxfdGltZScpOwoKICAgICAgICBpZiAoc2F2ZWRfbGlzdF91cmxfdGltZSkgewogICAgICAgICAgICB2YXIgJGN1cnJlbnRfZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIHZhciAkc2F2ZWRfdGltZSA9IG5ldyBEYXRlKHBhcnNlSW50KHNhdmVkX2xpc3RfdXJsX3RpbWUpKTsKICAgICAgICAgICAgJHNhdmVkX3RpbWUuc2V0TWludXRlcygkc2F2ZWRfdGltZS5nZXRNaW51dGVzKCkgKyA8P3BocCBlY2hvIGUoJGNydWQtPmdldFBlcnNpc3RlbnRUYWJsZUR1cmF0aW9uKCkpOyA/Pik7CgogICAgICAgICAgICAvLyBpZiB0aGUgc2F2ZSB0aW1lIGlzIG5vdCBleHBpcmVkIHdlIGZvcmNlIHRoZSBmaWx0ZXIgcmVkaXJlY3Rpb24uCiAgICAgICAgICAgIGlmKCRzYXZlZF90aW1lID4gJGN1cnJlbnRfZGF0ZSkgewogICAgICAgICAgICAgICAgaWYgKHNhdmVkX2xpc3RfdXJsICYmIHBlcnNpc3RlbnRVcmwhPXdpbmRvdy5sb2NhdGlvbi5ocmVmKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwZXJzaXN0ZW50VXJsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gcGVyc2lzdGVudCB0YWJsZSBleHBpcmVkLCBsZXQncyBub3QgcmVkaXJlY3QgdGhlIHVzZXIKICAgICAgICAgICAgICAgIHNhdmVkX2xpc3RfdXJsID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgPD9waHAgZW5kaWY7ID8+CiAgICAgICAgaWYgKHNhdmVkX2xpc3RfdXJsICYmIHBlcnNpc3RlbnRVcmwhPXdpbmRvdy5sb2NhdGlvbi5ocmVmKSB7CiAgICAgICAgICAgIC8vIGZpbmFsbHkgcmVkaXJlY3QgdGhlIHVzZXIuCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcGVyc2lzdGVudFVybDsKICAgICAgICB9CiAgICA8P3BocCBlbmRpZjsgPz4KCiAgICB3aW5kb3cuY3J1ZCA9IHsKICAgICAgZXhwb3J0QnV0dG9uczogSlNPTi5wYXJzZSgnPD9waHAgZWNobyBqc29uX2VuY29kZSgkY3J1ZC0+Z2V0KCdsaXN0LmV4cG9ydF9idXR0b25zJykpOyA/PicpLAogICAgICBmdW5jdGlvbnNUb1J1bk9uRGF0YVRhYmxlc0RyYXdFdmVudDogW10sCiAgICAgIGFkZEZ1bmN0aW9uVG9EYXRhVGFibGVzRHJhd0V2ZW50UXVldWU6IGZ1bmN0aW9uIChmdW5jdGlvbk5hbWUpIHsKICAgICAgICAgIGlmICh0aGlzLmZ1bmN0aW9uc1RvUnVuT25EYXRhVGFibGVzRHJhd0V2ZW50LmluZGV4T2YoZnVuY3Rpb25OYW1lKSA9PSAtMSkgewogICAgICAgICAgdGhpcy5mdW5jdGlvbnNUb1J1bk9uRGF0YVRhYmxlc0RyYXdFdmVudC5wdXNoKGZ1bmN0aW9uTmFtZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICByZXNwb25zaXZlVG9nZ2xlOiBmdW5jdGlvbihkdCkgewogICAgICAgICAgJChkdC50YWJsZSgpLmhlYWRlcigpKS5maW5kKCd0aCcpLnRvZ2dsZUNsYXNzKCdhbGwnKTsKICAgICAgICAgIGR0LnJlc3BvbnNpdmUucmVidWlsZCgpOwogICAgICAgICAgZHQucmVzcG9uc2l2ZS5yZWNhbGMoKTsKICAgICAgfSwKICAgICAgZXhlY3V0ZUZ1bmN0aW9uQnlOYW1lOiBmdW5jdGlvbihzdHIsIGFyZ3MpIHsKICAgICAgICB2YXIgYXJyID0gc3RyLnNwbGl0KCcuJyk7CiAgICAgICAgdmFyIGZuID0gd2luZG93WyBhcnJbMF0gXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspCiAgICAgICAgeyBmbiA9IGZuWyBhcnJbaV0gXTsgfQogICAgICAgIGZuLmFwcGx5KHdpbmRvdywgYXJncyk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZVVybCA6IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICBsZXQgdXJsU3RhcnQgPSAiPD9waHAgZWNobyBlKHVybCgkY3J1ZC0+cm91dGUpKTsgPz4iOwogICAgICAgIGxldCB1cmxFbmQgPSB1cmwucmVwbGFjZSh1cmxTdGFydCwgJycpOwogICAgICAgIHVybEVuZCA9IHVybEVuZC5yZXBsYWNlKCcvc2VhcmNoJywgJycpOwogICAgICAgIGxldCBuZXdVcmwgPSB1cmxTdGFydCArIHVybEVuZDsKICAgICAgICBsZXQgdG1wVXJsID0gbmV3VXJsLnNwbGl0KCI/IilbMF0sCiAgICAgICAgcGFyYW1zX2FyciA9IFtdLAogICAgICAgIHF1ZXJ5U3RyaW5nID0gKG5ld1VybC5pbmRleE9mKCI/IikgIT09IC0xKSA/IG5ld1VybC5zcGxpdCgiPyIpWzFdIDogZmFsc2U7CgogICAgICAgIC8vIGV4Y2x1ZGUgdGhlIHBlcnNpc3RlbnQtdGFibGUgcGFyYW1ldGVyIGZyb20gdXJsCiAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSBmYWxzZSkgewogICAgICAgICAgICBwYXJhbXNfYXJyID0gcXVlcnlTdHJpbmcuc3BsaXQoIiYiKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBhcmFtc19hcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgICAgIGxldCBwYXJhbSA9IHBhcmFtc19hcnJbaV0uc3BsaXQoIj0iKVswXTsKICAgICAgICAgICAgICAgIGlmIChwYXJhbSA9PT0gJ3BlcnNpc3RlbnQtdGFibGUnKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zX2Fyci5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV3VXJsID0gcGFyYW1zX2Fyci5sZW5ndGggPyB0bXBVcmwgKyAiPyIgKyBwYXJhbXNfYXJyLmpvaW4oIiYiKSA6IHRtcFVybDsKICAgICAgICB9CiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgbmV3VXJsKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnPD9waHAgZWNobyBlKFN0cjo6c2x1ZygkY3J1ZC0+Z2V0Um91dGUoKSkpOyA/Pl9saXN0X3VybCcsIG5ld1VybCk7CiAgICAgIH0sCiAgICAgIGRhdGFUYWJsZUNvbmZpZ3VyYXRpb246IHsKICAgICAgICBiSW5mbzogPD9waHAgZWNobyBlKHZhcl9leHBvcnQoJGNydWQtPmdldE9wZXJhdGlvblNldHRpbmcoJ3Nob3dFbnRyeUNvdW50JykgPz8gdHJ1ZSkpOyA/PiwKICAgICAgICA8P3BocCBpZigkY3J1ZC0+Z2V0UmVzcG9uc2l2ZVRhYmxlKCkpOiA/PgogICAgICAgIHJlc3BvbnNpdmU6IHsKICAgICAgICAgICAgZGV0YWlsczogewogICAgICAgICAgICAgICAgZGlzcGxheTogJC5mbi5kYXRhVGFibGUuUmVzcG9uc2l2ZS5kaXNwbGF5Lm1vZGFsKCB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBmdW5jdGlvbiAoIHJvdyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyB0aGUgY29udGVudCBvZiB0aGUgZmlyc3QgY29sdW1uCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzIHRoZSBtb2RhbCBoZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGRhdGEgPSByb3cuZGF0YSgpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZGF0YVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gKSwKICAgICAgICAgICAgICAgIHJlbmRlcmVyOiBmdW5jdGlvbiAoIGFwaSwgcm93SWR4LCBjb2x1bW5zICkgewoKICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkLm1hcCggY29sdW1ucywgZnVuY3Rpb24gKCBjb2wsIGkgKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uSGVhZGluZyA9IGNydWQudGFibGUuY29sdW1ucygpLmhlYWRlcigpW2NvbC5jb2x1bW5JbmRleF07CgogICAgICAgICAgICAgICAgICAgICAgLy8gaGlkZSBjb2x1bW5zIHRoYXQgaGF2ZSBWaXNpYmxlSW5Nb2RhbCBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgaWYgKCQoY29sdW1uSGVhZGluZykuYXR0cignZGF0YS12aXNpYmxlLWluLW1vZGFsJykgPT0gJ2ZhbHNlJykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8dHIgZGF0YS1kdC1yb3c9IicrY29sLnJvd0luZGV4KyciIGRhdGEtZHQtY29sdW1uPSInK2NvbC5jb2x1bW5JbmRleCsnIj4nKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOnRvcDsgYm9yZGVyOm5vbmU7Ij48c3Ryb25nPicrY29sLnRpdGxlLnRyaW0oKSsnOicrJzxzdHJvbmc+PC90ZD4gJysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nLWxlZnQ6MTBweDtwYWRkaW5nLWJvdHRvbToxMHB4OyBib3JkZXI6bm9uZTsiPicrY29sLmRhdGErJzwvdGQ+JysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvdHI+JzsKICAgICAgICAgICAgICAgICAgfSApLmpvaW4oJycpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEgPwogICAgICAgICAgICAgICAgICAgICAgJCgnPHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1zdHJpcGVkIG1iLTAiPicpLmFwcGVuZCggJzx0Ym9keT4nICsgZGF0YSArICc8L3Rib2R5PicgKSA6CiAgICAgICAgICAgICAgICAgICAgICBmYWxzZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZpeGVkSGVhZGVyOiB0cnVlLAogICAgICAgIDw/cGhwIGVsc2U6ID8+CiAgICAgICAgcmVzcG9uc2l2ZTogZmFsc2UsCiAgICAgICAgc2Nyb2xsWDogdHJ1ZSwKICAgICAgICA8P3BocCBlbmRpZjsgPz4KCiAgICAgICAgPD9waHAgaWYoJGNydWQtPmdldFBlcnNpc3RlbnRUYWJsZSgpKTogPz4KICAgICAgICBzdGF0ZVNhdmU6IHRydWUsCiAgICAgICAgLyoKICAgICAgICAgICAgaWYgZGV2ZWxvcGVyIGZvcmNlZCBmaWVsZCBpbnRvIHRhYmxlICd2aXNpYmxlSW5UYWJsZSA9PiB0cnVlJyB3ZSBtYWtlIHN1cmUgd2hlbiBzYXZpbmcgZGF0YXRhYmxlcyBzdGF0ZQogICAgICAgICAgICB0aGF0IGl0IHJlZmxlY3RzIHRoZSBkZXZlbG9wZXIgZGVjaXNpb24uCiAgICAgICAgKi8KCiAgICAgICAgc3RhdGVTYXZlUGFyYW1zOiBmdW5jdGlvbihzZXR0aW5ncywgZGF0YSkgewoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJzw/cGhwIGVjaG8gZShTdHI6OnNsdWcoJGNydWQtPmdldFJvdXRlKCkpKTsgPz5fbGlzdF91cmxfdGltZScsIGRhdGEudGltZSk7CgogICAgICAgICAgICBkYXRhLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGNvbHVtbkhlYWRpbmcgPSBjcnVkLnRhYmxlLmNvbHVtbnMoKS5oZWFkZXIoKVtpbmRleF07CiAgICAgICAgICAgICAgICBpZiAoJChjb2x1bW5IZWFkaW5nKS5hdHRyKCdkYXRhLXZpc2libGUtaW4tdGFibGUnKSA9PSAndHJ1ZScpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS52aXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICA8P3BocCBpZigkY3J1ZC0+Z2V0UGVyc2lzdGVudFRhYmxlRHVyYXRpb24oKSk6ID8+CiAgICAgICAgc3RhdGVMb2FkUGFyYW1zOiBmdW5jdGlvbihzZXR0aW5ncywgZGF0YSkgewogICAgICAgICAgICB2YXIgJHNhdmVkX3RpbWUgPSBuZXcgRGF0ZShkYXRhLnRpbWUpOwogICAgICAgICAgICB2YXIgJGN1cnJlbnRfZGF0ZSA9IG5ldyBEYXRlKCk7CgogICAgICAgICAgICAkc2F2ZWRfdGltZS5zZXRNaW51dGVzKCRzYXZlZF90aW1lLmdldE1pbnV0ZXMoKSArIDw/cGhwIGVjaG8gZSgkY3J1ZC0+Z2V0UGVyc2lzdGVudFRhYmxlRHVyYXRpb24oKSk7ID8+KTsKCiAgICAgICAgICAgIC8vaWYgdGhlIHNhdmUgdGltZSBhcyBleHBpcmVkIHdlIGZvcmNlIGRhdGF0YWJsZWQgdG8gY2xlYXIgbG9jYWxTdG9yYWdlCiAgICAgICAgICAgIGlmKCRzYXZlZF90aW1lIDwgJGN1cnJlbnRfZGF0ZSkgewogICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCc8P3BocCBlY2hvIGUoU3RyOjpzbHVnKCRjcnVkLT5nZXRSb3V0ZSgpKSk7ID8+X2xpc3RfdXJsJykpIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnPD9waHAgZWNobyBlKFN0cjo6c2x1ZygkY3J1ZC0+Z2V0Um91dGUoKSkpOyA/Pl9saXN0X3VybCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCc8P3BocCBlY2hvIGUoU3RyOjpzbHVnKCRjcnVkLT5nZXRSb3V0ZSgpKSk7ID8+X2xpc3RfdXJsX3RpbWUnKSkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCc8P3BocCBlY2hvIGUoU3RyOjpzbHVnKCRjcnVkLT5nZXRSb3V0ZSgpKSk7ID8+X2xpc3RfdXJsX3RpbWUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICA8P3BocCBlbmRpZjsgPz4KICAgICAgICBhdXRvV2lkdGg6IGZhbHNlLAogICAgICAgIHBhZ2VMZW5ndGg6ICRkdERlZmF1bHRQYWdlTGVuZ3RoLAogICAgICAgIGxlbmd0aE1lbnU6IDw/cGhwIGVjaG8ganNvbl9lbmNvZGUoJGNydWQtPmdldFBhZ2VMZW5ndGhNZW51KCksIDE1LCA1MTIpID8+LAogICAgICAgIC8qIERpc2FibGUgaW5pdGlhbCBzb3J0ICovCiAgICAgICAgYWFTb3J0aW5nOiBbXSwKICAgICAgICBsYW5ndWFnZTogewogICAgICAgICAgICAgICJlbXB0eVRhYmxlIjogICAgICI8P3BocCBlY2hvIGUodHJhbnMoJ2JhY2twYWNrOjpjcnVkLmVtcHR5VGFibGUnKSk7ID8+IiwKICAgICAgICAgICAgICAiaW5mbyI6ICAgICAgICAgICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5pbmZvJykpOyA/PiIsCiAgICAgICAgICAgICAgImluZm9FbXB0eSI6ICAgICAgIjw/cGhwIGVjaG8gZSh0cmFucygnYmFja3BhY2s6OmNydWQuaW5mb0VtcHR5JykpOyA/PiIsCiAgICAgICAgICAgICAgImluZm9GaWx0ZXJlZCI6ICAgIjw/cGhwIGVjaG8gZSh0cmFucygnYmFja3BhY2s6OmNydWQuaW5mb0ZpbHRlcmVkJykpOyA/PiIsCiAgICAgICAgICAgICAgImluZm9Qb3N0Rml4IjogICAgIjw/cGhwIGVjaG8gZSh0cmFucygnYmFja3BhY2s6OmNydWQuaW5mb1Bvc3RGaXgnKSk7ID8+IiwKICAgICAgICAgICAgICAidGhvdXNhbmRzIjogICAgICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC50aG91c2FuZHMnKSk7ID8+IiwKICAgICAgICAgICAgICAibGVuZ3RoTWVudSI6ICAgICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5sZW5ndGhNZW51JykpOyA/PiIsCiAgICAgICAgICAgICAgImxvYWRpbmdSZWNvcmRzIjogIjw/cGhwIGVjaG8gZSh0cmFucygnYmFja3BhY2s6OmNydWQubG9hZGluZ1JlY29yZHMnKSk7ID8+IiwKICAgICAgICAgICAgICAicHJvY2Vzc2luZyI6ICAgICAiPGltZyBzcmM9Jzw/cGhwIGVjaG8gZShhc3NldCgncGFja2FnZXMvYmFja3BhY2svYmFzZS9pbWcvc3Bpbm5lci5zdmcnKSk7ID8+JyBhbHQ9Jzw/cGhwIGVjaG8gZSh0cmFucygnYmFja3BhY2s6OmNydWQucHJvY2Vzc2luZycpKTsgPz4nPiIsCiAgICAgICAgICAgICAgInNlYXJjaCI6ICJfSU5QVVRfIiwKICAgICAgICAgICAgICAic2VhcmNoUGxhY2Vob2xkZXIiOiAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5zZWFyY2gnKSk7ID8+Li4uIiwKICAgICAgICAgICAgICAiemVyb1JlY29yZHMiOiAgICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC56ZXJvUmVjb3JkcycpKTsgPz4iLAogICAgICAgICAgICAgICJwYWdpbmF0ZSI6IHsKICAgICAgICAgICAgICAgICAgImZpcnN0IjogICAgICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5wYWdpbmF0ZS5maXJzdCcpKTsgPz4iLAogICAgICAgICAgICAgICAgICAibGFzdCI6ICAgICAgICI8P3BocCBlY2hvIGUodHJhbnMoJ2JhY2twYWNrOjpjcnVkLnBhZ2luYXRlLmxhc3QnKSk7ID8+IiwKICAgICAgICAgICAgICAgICAgIm5leHQiOiAgICAgICAiPiIsCiAgICAgICAgICAgICAgICAgICJwcmV2aW91cyI6ICAgIjwiCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAiYXJpYSI6IHsKICAgICAgICAgICAgICAgICAgInNvcnRBc2NlbmRpbmciOiAgIjw/cGhwIGVjaG8gZSh0cmFucygnYmFja3BhY2s6OmNydWQuYXJpYS5zb3J0QXNjZW5kaW5nJykpOyA/PiIsCiAgICAgICAgICAgICAgICAgICJzb3J0RGVzY2VuZGluZyI6ICI8P3BocCBlY2hvIGUodHJhbnMoJ2JhY2twYWNrOjpjcnVkLmFyaWEuc29ydERlc2NlbmRpbmcnKSk7ID8+IgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgImJ1dHRvbnMiOiB7CiAgICAgICAgICAgICAgICAgICJjb3B5IjogICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5leHBvcnQuY29weScpKTsgPz4iLAogICAgICAgICAgICAgICAgICAiZXhjZWwiOiAgIjw/cGhwIGVjaG8gZSh0cmFucygnYmFja3BhY2s6OmNydWQuZXhwb3J0LmV4Y2VsJykpOyA/PiIsCiAgICAgICAgICAgICAgICAgICJjc3YiOiAgICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5leHBvcnQuY3N2JykpOyA/PiIsCiAgICAgICAgICAgICAgICAgICJwZGYiOiAgICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5leHBvcnQucGRmJykpOyA/PiIsCiAgICAgICAgICAgICAgICAgICJwcmludCI6ICAiPD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5leHBvcnQucHJpbnQnKSk7ID8+IiwKICAgICAgICAgICAgICAgICAgImNvbHZpcyI6ICI8P3BocCBlY2hvIGUodHJhbnMoJ2JhY2twYWNrOjpjcnVkLmV4cG9ydC5jb2x1bW5fdmlzaWJpbGl0eScpKTsgPz4iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICBwcm9jZXNzaW5nOiB0cnVlLAogICAgICAgICAgc2VydmVyU2lkZTogdHJ1ZSwKICAgICAgICAgIDw/cGhwIGlmKCRjcnVkLT5nZXRPcGVyYXRpb25TZXR0aW5nKCdzaG93RW50cnlDb3VudCcpID09PSBmYWxzZSk6ID8+CiAgICAgICAgICAgIHBhZ2luZ1R5cGU6ICJzaW1wbGUiLAogICAgICAgICAgPD9waHAgZW5kaWY7ID8+CiAgICAgICAgICBzZWFyY2hpbmc6IDw/cGhwIGVjaG8ganNvbl9lbmNvZGUoJGNydWQtPmdldE9wZXJhdGlvblNldHRpbmcoJ3NlYXJjaGFibGVUYWJsZScpID8/IHRydWUsIDE1LCA1MTIpID8+LAogICAgICAgICAgYWpheDogewogICAgICAgICAgICAgICJ1cmwiOiAiPD9waHAgZWNobyB1cmwoJGNydWQtPnJvdXRlLicvc2VhcmNoJykuJz8nLlJlcXVlc3Q6OmdldFF1ZXJ5U3RyaW5nKCk7ID8+IiwKICAgICAgICAgICAgICAidHlwZSI6ICJQT1NUIiwKICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICJ0b3RhbEVudHJ5Q291bnQiOiAiPD9waHAgZWNobyBlKCRjcnVkLT5nZXRPcGVyYXRpb25TZXR0aW5nKCd0b3RhbEVudHJ5Q291bnQnKSA/PyBmYWxzZSk7ID8+IgogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIGRvbToKICAgICAgICAgICAgIjwncm93IGhpZGRlbic8J2NvbC1zbS02J2k+PCdjb2wtc20tNiBkLXByaW50LW5vbmUnZj4+IiArCiAgICAgICAgICAgICI8J3Jvdyc8J2NvbC1zbS0xMid0cj4+IiArCiAgICAgICAgICAgICI8J3JvdyBtdC0yIGQtcHJpbnQtbm9uZSAnPCdjb2wtc20tMTIgY29sLW1kLTQnbD48J2NvbC1zbS0wIGNvbC1tZC00IHRleHQtY2VudGVyJ0I+PCdjb2wtc20tMTIgY29sLW1kLTQgJ3A+PiIsCiAgICAgIH0KICB9CiAgPC9zY3JpcHQ+CiAgPD9waHAgZWNobyAkX19lbnYtPm1ha2UoJ2NydWQ6OmluYy5leHBvcnRfYnV0dG9ucycsIFxJbGx1bWluYXRlXFN1cHBvcnRcQXJyOjpleGNlcHQoZ2V0X2RlZmluZWRfdmFycygpLCBbJ19fZGF0YScsICdfX3BhdGgnXSkpLT5yZW5kZXIoKTsgPz4KCiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgogICAgalF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKSB7CgogICAgICB3aW5kb3cuY3J1ZC50YWJsZSA9ICQoIiNjcnVkVGFibGUiKS5EYXRhVGFibGUod2luZG93LmNydWQuZGF0YVRhYmxlQ29uZmlndXJhdGlvbik7CgogICAgICB3aW5kb3cuY3J1ZC51cGRhdGVVcmwobG9jYXRpb24uaHJlZik7CgogICAgICAvLyBtb3ZlIHNlYXJjaCBiYXIKICAgICAgJCgiI2NydWRUYWJsZV9maWx0ZXIiKS5hcHBlbmRUbygkKCcjZGF0YXRhYmxlX3NlYXJjaF9zdGFjaycgKSk7CiAgICAgICQoIiNjcnVkVGFibGVfZmlsdGVyIGlucHV0IikucmVtb3ZlQ2xhc3MoJ2Zvcm0tY29udHJvbC1zbScpOwoKICAgICAgLy8gbW92ZSAic2hvd2luZyB4IG91dCBvZiB5IiBpbmZvIHRvIGhlYWRlcgogICAgICA8P3BocCBpZigkY3J1ZC0+Z2V0U3ViaGVhZGluZygpKTogPz4KICAgICAgJCgnI2NydWRUYWJsZV9pbmZvJykuaGlkZSgpOwogICAgICA8P3BocCBlbHNlOiA/PgogICAgICAkKCIjZGF0YXRhYmxlX2luZm9fc3RhY2siKS5odG1sKCQoJyNjcnVkVGFibGVfaW5mbycpKS5jc3MoJ2Rpc3BsYXknLCdpbmxpbmUtZmxleCcpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTsKICAgICAgPD9waHAgZW5kaWY7ID8+CgogICAgICA8P3BocCBpZigkY3J1ZC0+Z2V0T3BlcmF0aW9uU2V0dGluZygncmVzZXRCdXR0b24nKSA/PyB0cnVlKTogPz4KICAgICAgICAvLyBjcmVhdGUgdGhlIHJlc2V0IGJ1dHRvbgogICAgICAgIHZhciBjcnVkVGFibGVSZXNldEJ1dHRvbiA9ICc8YSBocmVmPSI8P3BocCBlY2hvIGUodXJsKCRjcnVkLT5yb3V0ZSkpOyA/PiIgY2xhc3M9Im1sLTEiIGlkPSJjcnVkVGFibGVfcmVzZXRfYnV0dG9uIj48P3BocCBlY2hvIGUodHJhbnMoJ2JhY2twYWNrOjpjcnVkLnJlc2V0JykpOyA/PjwvYT4nOwoKICAgICAgICAkKCcjZGF0YXRhYmxlX2luZm9fc3RhY2snKS5hcHBlbmQoY3J1ZFRhYmxlUmVzZXRCdXR0b24pOwoKICAgICAgICAgIC8vIHdoZW4gY2xpY2tpbmcgaW4gcmVzZXQgYnV0dG9uIHdlIGNsZWFyIHRoZSBsb2NhbFN0b3JhZ2UgZm9yIGRhdGF0YWJsZXMuCiAgICAgICAgJCgnI2NydWRUYWJsZV9yZXNldF9idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHsKCiAgICAgICAgICAvL2NsZWFyIHRoZSBmaWx0ZXJzCiAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJzw/cGhwIGVjaG8gZShTdHI6OnNsdWcoJGNydWQtPmdldFJvdXRlKCkpKTsgPz5fbGlzdF91cmwnKSkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCc8P3BocCBlY2hvIGUoU3RyOjpzbHVnKCRjcnVkLT5nZXRSb3V0ZSgpKSk7ID8+X2xpc3RfdXJsJyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJzw/cGhwIGVjaG8gZShTdHI6OnNsdWcoJGNydWQtPmdldFJvdXRlKCkpKTsgPz5fbGlzdF91cmxfdGltZScpKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJzw/cGhwIGVjaG8gZShTdHI6OnNsdWcoJGNydWQtPmdldFJvdXRlKCkpKTsgPz5fbGlzdF91cmxfdGltZScpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vY2xlYXIgdGhlIHRhYmxlIHNvcnRpbmcvb3JkZXJpbmcvdmlzaWJpbGl0eQogICAgICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0RhdGFUYWJsZXNfY3J1ZFRhYmxlXy88P3BocCBlY2hvIGUoJGNydWQtPmdldFJvdXRlKCkpOyA/PicpKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0RhdGFUYWJsZXNfY3J1ZFRhYmxlXy88P3BocCBlY2hvIGUoJGNydWQtPmdldFJvdXRlKCkpOyA/PicpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICA8P3BocCBlbmRpZjsgPz4KCiAgICAgIC8vIG1vdmUgdGhlIGJvdHRvbSBidXR0b25zIGJlZm9yZSBwYWdpbmF0aW9uCiAgICAgICQoIiNib3R0b21fYnV0dG9ucyIpLmluc2VydEJlZm9yZSgkKCcjY3J1ZFRhYmxlX3dyYXBwZXIgLnJvdzpsYXN0LWNoaWxkJyApKTsKCiAgICAgIC8vIG92ZXJyaWRlIGFqYXggZXJyb3IgbWVzc2FnZQogICAgICAkLmZuLmRhdGFUYWJsZS5leHQuZXJyTW9kZSA9ICdub25lJzsKICAgICAgJCgnI2NydWRUYWJsZScpLm9uKCdlcnJvci5kdCcsIGZ1bmN0aW9uKGUsIHNldHRpbmdzLCB0ZWNoTm90ZSwgbWVzc2FnZSkgewogICAgICAgICAgbmV3IE5vdHkoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgdGV4dDogIjxzdHJvbmc+PD9waHAgZWNobyBlKHRyYW5zKCdiYWNrcGFjazo6Y3J1ZC5hamF4X2Vycm9yX3RpdGxlJykpOyA/Pjwvc3Ryb25nPjxicj48P3BocCBlY2hvIGUodHJhbnMoJ2JhY2twYWNrOjpjcnVkLmFqYXhfZXJyb3JfdGV4dCcpKTsgPz4iCiAgICAgICAgICB9KS5zaG93KCk7CiAgICAgIH0pOwoKICAgICAgICAvLyB3aGVuIGNoYW5naW5nIHBhZ2UgbGVuZ3RoIGluIGRhdGF0YWJsZXMsIHNhdmUgaXQgaW50byBsb2NhbFN0b3JhZ2UKICAgICAgICAvLyBzbyBpbiBuZXh0IHJlcXVlc3RzIHdlIGtub3cgaWYgdGhlIGxlbmd0aCBjaGFuZ2VkIGJ5IHVzZXIKICAgICAgICAvLyBvciBieSBkZXZlbG9wZXIgaW4gdGhlIGNvbnRyb2xsZXIuCiAgICAgICAgJCgnI2NydWRUYWJsZScpLm9uKCAnbGVuZ3RoLmR0JywgZnVuY3Rpb24gKCBlLCBzZXR0aW5ncywgbGVuICkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnRGF0YVRhYmxlc19jcnVkVGFibGVfLzw/cGhwIGVjaG8gZSgkY3J1ZC0+Z2V0Um91dGUoKSk7ID8+X3BhZ2VMZW5ndGgnLCBsZW4pOwogICAgICAgIH0pOwoKICAgICAgICAvLyBtYWtlIHN1cmUgQUpBWCByZXF1ZXN0cyBpbmNsdWRlIFhTUkYgdG9rZW4KICAgICAgICAkLmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24ob3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCB4aHIpIHsKICAgICAgICAgICAgdmFyIHRva2VuID0gJCgnbWV0YVtuYW1lPSJjc3JmX3Rva2VuIl0nKS5hdHRyKCdjb250ZW50Jyk7CgogICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgIHJldHVybiB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1YU1JGLVRPS0VOJywgdG9rZW4pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgoKICAgICAgICAkKCcjY3J1ZFRhYmxlJykub24oICdwYWdlLmR0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGFnZV9jaGFuZ2VkJywgdHJ1ZSk7CiAgICAgICAgfSk7CgogICAgICAvLyBvbiBEYXRhVGFibGUgZHJhdyBldmVudCBydW4gYWxsIGZ1bmN0aW9ucyBpbiB0aGUgcXVldWUKICAgICAgLy8gKGVnLiBkZWxldGUgYW5kIGRldGFpbHNfcm93IGJ1dHRvbnMgYWRkIGZ1bmN0aW9ucyB0byB0aGlzIHF1ZXVlKQogICAgICAkKCcjY3J1ZFRhYmxlJykub24oICdkcmF3LmR0JywgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgIGNydWQuZnVuY3Rpb25zVG9SdW5PbkRhdGFUYWJsZXNEcmF3RXZlbnQuZm9yRWFjaChmdW5jdGlvbihmdW5jdGlvbk5hbWUpIHsKICAgICAgICAgICAgY3J1ZC5leGVjdXRlRnVuY3Rpb25CeU5hbWUoZnVuY3Rpb25OYW1lKTsKICAgICAgICAgfSk7CiAgICAgIH0gKS5kYXRhVGFibGUoKTsKCiAgICAgIC8vIHdoZW4gZGF0YXRhYmxlcy1jb2x2aXMgKGNvbHVtbiB2aXNpYmlsaXR5KSBpcyB0b2dnbGVkCiAgICAgIC8vIHJlYnVpbGQgdGhlIGRhdGF0YWJsZSB1c2luZyB0aGUgZGF0YXRhYmxlLXJlc3BvbnNpdmUgcGx1Z2luCiAgICAgICQoJyNjcnVkVGFibGUnKS5vbiggJ2NvbHVtbi12aXNpYmlsaXR5LmR0JywgICBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgY3J1ZC50YWJsZS5yZXNwb25zaXZlLnJlYnVpbGQoKTsKICAgICAgfSApLmRhdGFUYWJsZSgpOwoKICAgICAgPD9waHAgaWYoJGNydWQtPmdldFJlc3BvbnNpdmVUYWJsZSgpKTogPz4KICAgICAgICAvLyB3aGVuIGNvbHVtbnMgYXJlIGhpZGRlbiBieSByZXBvbnNpdmUgcGx1Z2luLAogICAgICAgIC8vIHRoZSB0YWJsZSBzaG91bGQgaGF2ZSB0aGUgaGFzLWhpZGRlbi1jb2x1bW5zIGNsYXNzCiAgICAgICAgY3J1ZC50YWJsZS5vbiggJ3Jlc3BvbnNpdmUtcmVzaXplJywgZnVuY3Rpb24gKCBlLCBkYXRhdGFibGUsIGNvbHVtbnMgKSB7CiAgICAgICAgICAgIGlmIChjcnVkLnRhYmxlLnJlc3BvbnNpdmUuaGFzSGlkZGVuKCkpIHsKICAgICAgICAgICAgICAkKCIjY3J1ZFRhYmxlIikucmVtb3ZlQ2xhc3MoJ2hhcy1oaWRkZW4tY29sdW1ucycpLmFkZENsYXNzKCdoYXMtaGlkZGVuLWNvbHVtbnMnKTsKICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJCgiI2NydWRUYWJsZSIpLnJlbW92ZUNsYXNzKCdoYXMtaGlkZGVuLWNvbHVtbnMnKTsKICAgICAgICAgICAgIH0KICAgICAgICB9ICk7CiAgICAgIDw/cGhwIGVsc2U6ID8+CiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBjb2x1bW4gaGVhZGluZ3MgaGF2ZSB0aGUgc2FtZSB3aWR0aCBhcyB0aGUgYWN0dWFsIGNvbHVtbnMKICAgICAgICAvLyBhZnRlciB0aGUgdXNlciBtYW51YWxseSByZXNpemVzIHRoZSB3aW5kb3cKICAgICAgICB2YXIgcmVzaXplVGltZXI7CiAgICAgICAgZnVuY3Rpb24gcmVzaXplQ3J1ZFRhYmxlQ29sdW1uV2lkdGhzKCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVyKTsKICAgICAgICAgIHJlc2l6ZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgLy8gUnVuIGNvZGUgaGVyZSwgcmVzaXppbmcgaGFzICJzdG9wcGVkIgogICAgICAgICAgICBjcnVkLnRhYmxlLmNvbHVtbnMuYWRqdXN0KCk7CiAgICAgICAgICB9LCAyNTApOwogICAgICAgIH0KICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIHJlc2l6ZUNydWRUYWJsZUNvbHVtbldpZHRocygpOwogICAgICAgIH0pOwogICAgICAgICQoJy5zaWRlYmFyLXRvZ2dsZXInKS5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICAgIHJlc2l6ZUNydWRUYWJsZUNvbHVtbldpZHRocygpOwogICAgICAgIH0pOwogICAgICA8P3BocCBlbmRpZjsgPz4KCiAgICB9KTsKICA8L3NjcmlwdD4KCiAgPD9waHAgZWNobyAkX19lbnYtPm1ha2UoJ2NydWQ6OmluYy5kZXRhaWxzX3Jvd19sb2dpYycsIFxJbGx1bWluYXRlXFN1cHBvcnRcQXJyOjpleGNlcHQoZ2V0X2RlZmluZWRfdmFycygpLCBbJ19fZGF0YScsICdfX3BhdGgnXSkpLT5yZW5kZXIoKTsgPz4KPD9waHAgLyoqUEFUSCBDOlxVc2Vyc1xpc21hZVxEb2N1bWVudHNcUHJveWVjdG9HZW9NaXJcZ2VvbWlyLWxhcmF2ZWwtSUhNR1xsYXJhdmVsXHZlbmRvclxiYWNrcGFja1xjcnVkXHNyY1xyZXNvdXJjZXNcdmlld3NcY3J1ZC9pbmMvZGF0YXRhYmxlc19sb2dpYy5ibGFkZS5waHAgRU5EUEFUSCoqLyA/PiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9czo0MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBlbnVtcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBtZXRhZGF0YSI7YTowOnt9fQ==";