1711241706
waR3U4bTeM%3A52c071c1910563476de36a07be5d3b80-5e689980b9d6bc07aaf92ce6f0a25b6c
s:10040:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjVlNjg5OTgwYjlkNmJjMDdhYWY5MmNlNmYwYTI1YjZjIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6Mjg6ImZvcm1fZmllbGRzX3NjcmlwdC5ibGFkZS5waHAiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czo3ODoidmVuZG9yL2JhY2twYWNrL2NydWQvc3JjL3Jlc291cmNlcy92aWV3cy9jcnVkL2luYy9mb3JtX2ZpZWxkc19zY3JpcHQuYmxhZGUucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czo2NTU2OiI8c2NyaXB0PgogICAgLyoqCiAgICAgKiBBIGZyb250LWVuZCByZXByZXNlbnRhdGlvbiBvZiBhIEJhY2twYWNrIGZpZWxkLCB3aXRoIGl0cyBtYWluIGNvbXBvbmVudHMuCiAgICAgKgogICAgICogTWFrZXMgaXQgZGVhZC1zaW1wbGUgZm9yIHRoZSBkZXZlbG9wZXIgdG8gcGVyZm9ybSB0aGUgbW9zdCBjb21tb24KICAgICAqIGphdmFzY3JpcHQgbWFuaXB1bGF0aW9ucywgYW5kIG1ha2VzIGl0IGVhc3kgdG8gZG8gY3VzdG9tIHN0dWZmCiAgICAgKiB0b28sIGJ5IGV4cG9zaW5nIHRoZSBtYWluIGNvbXBvbmVudHMgKG5hbWUsIHdyYXBwZXIsIGlucHV0KS4KICAgICAqLwogICAgY2xhc3MgQ3J1ZEZpZWxkIHsKICAgICAgICBjb25zdHJ1Y3RvcihuYW1lKSB7CiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CgogICAgICAgICAgICAvLyBnZXQgdGhlIGlucHV0L3RleHRhcmVhL3NlbGVjdCB0aGF0IGhhcyB0aGF0IGZpZWxkIG5hbWUKICAgICAgICAgICAgdGhpcy4kaW5wdXQgPSAkKGBpbnB1dFtuYW1lPSIke3RoaXMubmFtZX0iXSwgdGV4dGFyZWFbbmFtZT0iJHt0aGlzLm5hbWV9Il0sIHNlbGVjdFtuYW1lPSIke3RoaXMubmFtZX0iXSwgc2VsZWN0W25hbWU9IiR7dGhpcy5uYW1lfVtdIl1gKS5maXJzdCgpOwoKICAgICAgICAgICAgLy8gZ2V0IHRoZSBmaWVsZCB3cmFwZXIKICAgICAgICAgICAgdGhpcy53cmFwcGVyID0gdGhpcy5pbnB1dFdyYXBwZXI7CgogICAgICAgICAgICAvLyBpbiBjYXNlIGBicC1maWVsZC1tYWluLWlucHV0YCBpcyBzcGVjaWZpZWQgb24gYSBmaWVsZCBpbnB1dCwgdXNlIHRoYXQgb25lIGFzIGlucHV0CiAgICAgICAgICAgIHRoaXMuJGlucHV0ID0gdGhpcy5tYWluSW5wdXQ7CgogICAgICAgICAgICAvLyBWYWxpZGF0ZSB0aGF0IHRoZSB3cmFwcGVyIGhhcyBiZWVuIGZvdW5kCiAgICAgICAgICAgIGlmICh0aGlzLndyYXBwZXIubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDcnVkRmllbGQgZXJyb3IhIENvdWxkIG5vdCBzZWxlY3QgV1JBUFBFUiBmb3IgIiR7dGhpcy5uYW1lfSJgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgZmllbGQgaGFzIGJlZW4gZm91bmQKICAgICAgICAgICAgaWYodGhpcy4kaW5wdXQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDcnVkRmllbGQgZXJyb3IhIENvdWxkIG5vdCBzZWxlY3QgSU5QVVQgZm9yICIke3RoaXMubmFtZX0iYCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLiRpbnB1dFswXTsKICAgICAgICAgICAgdGhpcy50eXBlID0gdGhpcy53cmFwcGVyLmF0dHIoJ2JwLWZpZWxkLXR5cGUnKTsKCiAgICAgICAgICAgIHJldHVybiB0aGlzOwoKICAgICAgICB9CgogICAgICAgIGdldCBtYWluSW5wdXQoKSB7CiAgICAgICAgICAgIGxldCBpbnB1dCA9IHRoaXMud3JhcHBlci5maW5kKCdbYnAtZmllbGQtbWFpbi1pbnB1dF0nKS5maXJzdCgpOwoKICAgICAgICAgICAgLy8gaWYgYSBicC1maWVsZC1tYWluLWlucHV0IGhhcyBiZWVuIHNwZWNpZmllZCBieSBkZXZlbG9wZXIsIHRoYXQncyBpdCwgdXNlIHRoYXQgb25lCiAgICAgICAgICAgIGlmIChpbnB1dC5sZW5ndGggIT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCB0cnkgdG8gZmluZCB0aGUgaW5wdXQgdXNpbmcgb3RoZXIgc2VsZWN0b3JzCiAgICAgICAgICAgIGlmICh0aGlzLiRpbnB1dC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIC8vIHRyeSBzZWFyY2hpbmcgZm9yIHRoZSBmaWVsZCB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGJwLWZpZWxkLW5hbWUKICAgICAgICAgICAgICAgIGlucHV0ID0gdGhpcy53cmFwcGVyLmZpbmQoYGlucHV0W2JwLWZpZWxkLW5hbWU9IiR7dGhpcy5uYW1lfSJdLCB0ZXh0YXJlYVticC1maWVsZC1uYW1lPSIke3RoaXMubmFtZX0iXSwgc2VsZWN0W2JwLWZpZWxkLW5hbWU9IiR7dGhpcy5uYW1lfSJdLCBzZWxlY3RbYnAtZmllbGQtbmFtZT0iJHt0aGlzLm5hbWV9W10iXWApLmZpcnN0KCk7CgogICAgICAgICAgICAgICAgLy8gaWYgbm90IGlucHV0IGZvdW5kIHlldCwganVzdCBnZXQgdGhlIGZpcnN0IGlucHV0IGluIHRoYXQgd3JhcHBlcgogICAgICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGlucHV0ID0gdGhpcy53cmFwcGVyLmZpbmQoJ2lucHV0LCB0ZXh0YXJlYSwgc2VsZWN0JykuZmlyc3QoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpbnB1dDsKCiAgICAgICAgfQoKICAgICAgICBnZXQgdmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRpbnB1dC52YWwoKTsKICAgICAgICB9CgogICAgICAgIGdldCBpbnB1dFdyYXBwZXIoKSB7CiAgICAgICAgICAgIGxldCB3cmFwcGVyID0gdGhpcy4kaW5wdXQuY2xvc2VzdCgnW2JwLWZpZWxkLXdyYXBwZXJdJyk7CiAgICAgICAgICAgIGlmICh3cmFwcGVyLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgd3JhcHBlciA9ICQoYFticC1maWVsZC1uYW1lPSIke3RoaXMubmFtZX0iXVticC1maWVsZC13cmFwcGVyXWApLmZpcnN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXI7CiAgICAgICAgfQoKICAgICAgICBvbkNoYW5nZShjbG9zdXJlKSB7CiAgICAgICAgICAgIGNvbnN0IGJpbmRlZENsb3N1cmUgPSBjbG9zdXJlLmJpbmQodGhpcyk7CiAgICAgICAgICAgIGNvbnN0IGZpZWxkQ2hhbmdlZCA9IChldmVudCwgdmFsdWVzKSA9PiBiaW5kZWRDbG9zdXJlKHRoaXMsIGV2ZW50LCB2YWx1ZXMpOwoKICAgICAgICAgICAgaWYodGhpcy5pc1N1YmZpZWxkKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuY3J1ZC5zdWJmaWVsZHNDYWxsYmFja3NbdGhpcy5wYXJlbnQubmFtZV0gPz89IFtdOwogICAgICAgICAgICAgICAgd2luZG93LmNydWQuc3ViZmllbGRzQ2FsbGJhY2tzW3RoaXMucGFyZW50Lm5hbWVdLnB1c2goeyBjbG9zdXJlLCBmaWVsZDogdGhpcyB9KTsKICAgICAgICAgICAgICAgIHRoaXMud3JhcHBlci50cmlnZ2VyKCdDcnVkRmllbGQ6c3ViZmllbGRDYWxsYmFja3NVcGRhdGVkJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoWydJTlBVVCcsICdURVhUQVJFQSddLmluY2x1ZGVzKHRoaXMuaW5wdXQ/Lm5vZGVOYW1lKSkgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dD8uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmaWVsZENoYW5nZWQsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRpbnB1dC5jaGFuZ2UoZmllbGRDaGFuZ2VkKTsKCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgY2hhbmdlKCkgewogICAgICAgICAgICBpZih0aGlzLmlzU3ViZmllbGQpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5jcnVkLnN1YmZpZWxkc0NhbGxiYWNrc1t0aGlzLnBhcmVudC5uYW1lXT8uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjay50cmlnZ2VyQ2hhbmdlID0gdHJ1ZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRpbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICBzaG93KHZhbHVlID0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLndyYXBwZXIudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScsICF2YWx1ZSk7CiAgICAgICAgICAgIHRoaXMuJGlucHV0LnRyaWdnZXIoYENydWRGaWVsZDoke3ZhbHVlID8gJ3Nob3cnIDogJ2hpZGUnfWApOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIGhpZGUodmFsdWUgPSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3coIXZhbHVlKTsKICAgICAgICB9CgogICAgICAgIGVuYWJsZSh2YWx1ZSA9IHRydWUpIHsKICAgICAgICAgICAgdGhpcy4kaW5wdXQuYXR0cignZGlzYWJsZWQnLCAhdmFsdWUgJiYgJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgIHRoaXMuJGlucHV0LnRyaWdnZXIoYENydWRGaWVsZDoke3ZhbHVlID8gJ2VuYWJsZScgOiAnZGlzYWJsZSd9YCk7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgZGlzYWJsZSh2YWx1ZSA9IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlKCF2YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICByZXF1aXJlKHZhbHVlID0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLndyYXBwZXIudG9nZ2xlQ2xhc3MoJ3JlcXVpcmVkJywgdmFsdWUpOwogICAgICAgICAgICB0aGlzLiRpbnB1dC50cmlnZ2VyKGBDcnVkRmllbGQ6JHt2YWx1ZSA/ICdyZXF1aXJlJyA6ICd1bnJlcXVpcmUnfWApOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHVucmVxdWlyZSh2YWx1ZSA9IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZSghdmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgY2hlY2sodmFsdWUgPSB0cnVlKSB7CiAgICAgICAgICAgIHRoaXMud3JhcHBlci5maW5kKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLnByb3AoJ2NoZWNrZWQnLCB2YWx1ZSkudHJpZ2dlcignY2hhbmdlJyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgdW5jaGVjayh2YWx1ZSA9IHRydWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2soIXZhbHVlKTsKICAgICAgICB9CgogICAgICAgIHN1YmZpZWxkKG5hbWUsIHJvd051bWJlciA9IGZhbHNlKSB7CiAgICAgICAgICAgIGxldCBzdWJmaWVsZCA9IG5ldyBDcnVkRmllbGQodGhpcy5uYW1lKTsKICAgICAgICAgICAgc3ViZmllbGQubmFtZSA9IG5hbWU7CgogICAgICAgICAgICBpZighcm93TnVtYmVyKSB7CiAgICAgICAgICAgICAgICBzdWJmaWVsZC5pc1N1YmZpZWxkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHN1YmZpZWxkLnN1YmZpZWxkSG9sZGVyID0gdGhpcy5uYW1lOyAvLyBkZXByZWNhdGVkCiAgICAgICAgICAgICAgICBzdWJmaWVsZC5wYXJlbnQgPSB0aGlzOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3ViZmllbGQucm93TnVtYmVyID0gcm93TnVtYmVyOwogICAgICAgICAgICAgICAgc3ViZmllbGQud3JhcHBlciA9ICQoYFtkYXRhLXJlcGVhdGFibGUtaWRlbnRpZmllcj0iJHt0aGlzLm5hbWV9Il1bZGF0YS1yb3ctbnVtYmVyPSIke3Jvd051bWJlcn0iXWApLmZpbmQoYFticC1maWVsZC13cmFwcGVyXVticC1maWVsZC1uYW1lJD0iJHtuYW1lfSJdYCk7CiAgICAgICAgICAgICAgICBzdWJmaWVsZC4kaW5wdXQgPSBzdWJmaWVsZC53cmFwcGVyLmZpbmQoYFtkYXRhLXJlcGVhdGFibGUtaW5wdXQtbmFtZSQ9IiR7bmFtZX0iXVticC1maWVsZC1tYWluLWlucHV0XWApOwogICAgICAgICAgICAgICAgLy8gaWYgbm8gYnAtZmllbGQtbWFpbi1pbnB1dCBoYXMgYmVlbiBkZWNsYXJlZCBpbiB0aGUgZmllbGQgaXRzZWxmLAogICAgICAgICAgICAgICAgLy8gYXNzdW1lIGl0J3MgdGhlIGZpcnN0IGlucHV0IGluIHRoYXQgd3JhcHBlciwgd2hhdGV2ZXIgaXQgaXMKICAgICAgICAgICAgICAgIGlmIChzdWJmaWVsZC4kaW5wdXQubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICBzdWJmaWVsZC4kaW5wdXQgPSBzdWJmaWVsZC53cmFwcGVyLmZpbmQoYGlucHV0W2RhdGEtcmVwZWF0YWJsZS1pbnB1dC1uYW1lJD0iJHtuYW1lfSJdLCB0ZXh0YXJlYVtkYXRhLXJlcGVhdGFibGUtaW5wdXQtbmFtZSQ9IiR7bmFtZX0iXSwgc2VsZWN0W2RhdGEtcmVwZWF0YWJsZS1pbnB1dC1uYW1lJD0iJHtuYW1lfSJdYCkuZmlyc3QoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzdWJmaWVsZC5pbnB1dCA9IHN1YmZpZWxkLiRpbnB1dFswXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3ViZmllbGQ7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogV2luZG93IGZ1bmN0aW9ucyB0aGF0IGhlbHAgdGhlIGRldmVsb3BlciBlYXNpbHkgc2VsZWN0IG9uZSBvciBtb3JlIGZpZWxkcy4KICAgICAqLwogICAgd2luZG93LmNydWQgPSB7CiAgICAgICAgLi4ud2luZG93LmNydWQsCgogICAgICAgIC8vIFN1YmZpZWxkcyBjYWxsYmFja3MgaG9sZGVyCiAgICAgICAgc3ViZmllbGRzQ2FsbGJhY2tzOiBbXSwKCiAgICAgICAgLy8gQ3JlYXRlIGEgZmllbGQgZnJvbSBhIGdpdmVuIG5hbWUKICAgICAgICBmaWVsZDogbmFtZSA9PiBuZXcgQ3J1ZEZpZWxkKG5hbWUpLAoKICAgICAgICAvLyBDcmVhdGUgYWxsIGZpZWxkcyBmcm9tIGEgZ2l2ZW4gbmFtZSBsaXN0CiAgICAgICAgZmllbGRzOiBuYW1lcyA9PiBuYW1lcy5tYXAod2luZG93LmNydWQuZmllbGQpLAogICAgfTsKPC9zY3JpcHQ+IjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";