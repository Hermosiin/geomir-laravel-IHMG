1711241706
waR3U4bTeM%3Ad620ee8f5c955df8339d4227d12e2cd2-185cb9b72e334f8e8c9da7b8db494bb5
s:21484:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjE4NWNiOWI3MmUzMzRmOGU4YzlkYTdiOGRiNDk0YmI1IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MzA6ImNoZWNrbGlzdF9kZXBlbmRlbmN5LmJsYWRlLnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjgzOiJ2ZW5kb3IvYmFja3BhY2svY3J1ZC9zcmMvcmVzb3VyY2VzL3ZpZXdzL2NydWQvZmllbGRzL2NoZWNrbGlzdF9kZXBlbmRlbmN5LmJsYWRlLnBocCI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6MTUxMzE6Int7LS0gZGVwZW5kZW5jeUpzb24gLS19fQpAcGhwCiAgJGZpZWxkWyd3cmFwcGVyJ10gPSAkZmllbGRbJ3dyYXBwZXInXSA/PyAkZmllbGRbJ3dyYXBwZXJBdHRyaWJ1dGVzJ10gPz8gW107CiAgJGZpZWxkWyd3cmFwcGVyJ11bJ2NsYXNzJ10gPSAkZmllbGRbJ3dyYXBwZXInXVsnY2xhc3MnXSA/PyAnZm9ybS1ncm91cCBjb2wtc20tMTInOwogICRmaWVsZFsnd3JhcHBlciddWydjbGFzcyddID0gJGZpZWxkWyd3cmFwcGVyJ11bJ2NsYXNzJ10uJyBjaGVja2xpc3RfZGVwZW5kZW5jeSc7CiAgJGZpZWxkWyd3cmFwcGVyJ11bJ2RhdGEtZW50aXR5J10gPSAkZmllbGRbJ3dyYXBwZXInXVsnZGF0YS1lbnRpdHknXSA/PyAkZmllbGRbJ2ZpZWxkX3VuaXF1ZV9uYW1lJ107CiAgJGZpZWxkWyd3cmFwcGVyJ11bJ2RhdGEtaW5pdC1mdW5jdGlvbiddID0gJGZpZWxkWyd3cmFwcGVyJ11bJ2luaXQtZnVuY3Rpb24nXSA/PyAnYnBGaWVsZEluaXRDaGVja2xpc3REZXBlbmRlbmN5RWxlbWVudCc7CkBlbmRwaHAKCkBpbmNsdWRlKCdjcnVkOjpmaWVsZHMuaW5jLndyYXBwZXJfc3RhcnQnKQoKICAgIDxsYWJlbD57ISEgJGZpZWxkWydsYWJlbCddICEhfTwvbGFiZWw+CiAgICA8P3BocAogICAgICAgICRlbnRpdHlfbW9kZWwgPSAkY3J1ZC0+Z2V0TW9kZWwoKTsKCiAgICAgICAgLy9zaG9ydCBuYW1lIGZvciBkZXBlbmRlbmN5IGZpZWxkcwogICAgICAgICRwcmltYXJ5X2RlcGVuZGVuY3kgPSAkZmllbGRbJ3N1YmZpZWxkcyddWydwcmltYXJ5J107CiAgICAgICAgJHNlY29uZGFyeV9kZXBlbmRlbmN5ID0gJGZpZWxkWydzdWJmaWVsZHMnXVsnc2Vjb25kYXJ5J107CgogICAgICAgIC8vYWxsIGl0ZW1zIHdpdGggcmVsYXRpb24KICAgICAgICAkZGVwZW5kZW5jaWVzID0gJHByaW1hcnlfZGVwZW5kZW5jeVsnbW9kZWwnXTo6d2l0aCgkcHJpbWFyeV9kZXBlbmRlbmN5WydlbnRpdHlfc2Vjb25kYXJ5J10pLT5nZXQoKTsKCiAgICAgICAgJGRlcGVuZGVuY3lBcnJheSA9IFtdOwoKICAgICAgICAvL2NvbnZlcnQgZGVwZW5kZW5jeSBhcnJheSB0byBzaW1wbGUgbWF0cml4ICggcHJpbWFyeSBpZCBhcyBrZXkgYW5kIGFycmF5IHdpdGggc2Vjb25kYXJpZXMgaWQgKQogICAgICAgIGZvcmVhY2ggKCRkZXBlbmRlbmNpZXMgYXMgJHByaW1hcnkpIHsKICAgICAgICAgICAgJGRlcGVuZGVuY3lBcnJheVskcHJpbWFyeS0+aWRdID0gW107CiAgICAgICAgICAgIGZvcmVhY2ggKCRwcmltYXJ5LT57JHByaW1hcnlfZGVwZW5kZW5jeVsnZW50aXR5X3NlY29uZGFyeSddfSBhcyAkc2Vjb25kYXJ5KSB7CiAgICAgICAgICAgICAgICAkZGVwZW5kZW5jeUFycmF5WyRwcmltYXJ5LT5pZF1bXSA9ICRzZWNvbmRhcnktPmlkOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkb2xkX3ByaW1hcnlfZGVwZW5kZW5jeSA9IG9sZF9lbXB0eV9vcl9udWxsKCRwcmltYXJ5X2RlcGVuZGVuY3lbJ25hbWUnXSwgZmFsc2UpID8/IGZhbHNlOwogICAgICAgICRvbGRfc2Vjb25kYXJ5X2RlcGVuZGVuY3kgPSBvbGRfZW1wdHlfb3JfbnVsbCgkc2Vjb25kYXJ5X2RlcGVuZGVuY3lbJ25hbWUnXSwgZmFsc2UpID8/IGZhbHNlOwoKICAgICAgLy9mb3IgdXBkYXRlIGZvcm0sIGdldCBpbml0aWFsIHN0YXRlIG9mIHRoZSBlbnRpdHkKICAgICAgaWYgKGlzc2V0KCRpZCkgJiYgJGlkKSB7CgogICAgICAgIC8vZ2V0IGVudGl0eSB3aXRoIHJlbGF0aW9ucyBmb3IgcHJpbWFyeSBkZXBlbmRlbmN5CiAgICAgICAgICAkZW50aXR5X2RlcGVuZGVuY2llcyA9ICRlbnRpdHlfbW9kZWwtPndpdGgoJHByaW1hcnlfZGVwZW5kZW5jeVsnZW50aXR5J10pCiAgICAgICAgICAtPndpdGgoJHByaW1hcnlfZGVwZW5kZW5jeVsnZW50aXR5J10uJy4nLiRwcmltYXJ5X2RlcGVuZGVuY3lbJ2VudGl0eV9zZWNvbmRhcnknXSkKICAgICAgICAgIC0+ZmluZCgkaWQpOwoKICAgICAgICAgICRzZWNvbmRhcmllc19mcm9tX3ByaW1hcnkgPSBbXTsKCiAgICAgICAgICAvL2NvbnZlcnQgcmVsYXRpb24gaW4gYXJyYXkKICAgICAgICAgICRwcmltYXJ5X2FycmF5ID0gJGVudGl0eV9kZXBlbmRlbmNpZXMtPnskcHJpbWFyeV9kZXBlbmRlbmN5WydlbnRpdHknXX0tPnRvQXJyYXkoKTsKCiAgICAgICAgICAkc2Vjb25kYXJ5X2lkcyA9IFtdOwogICAgICAgICAgLy9jcmVhdGUgc2Vjb25kYXJ5IGRlcGVuZGVuY3kgZnJvbSBwcmltYXJ5IHJlbGF0aW9uLCB1c2VkIHRvIGNoZWNrIHdoYXQgY2hlY2tib3ggbXVzdCBiZSBjaGVja2VkIGZyb20gc2Vjb25kIGNoZWNrbGlzdAogICAgICAgICAgaWYgKCRvbGRfcHJpbWFyeV9kZXBlbmRlbmN5KSB7CiAgICAgICAgICAgICAgZm9yZWFjaCAoJG9sZF9wcmltYXJ5X2RlcGVuZGVuY3kgYXMgJHByaW1hcnlfaXRlbSkgewogICAgICAgICAgICAgICAgICBmb3JlYWNoICgkZGVwZW5kZW5jeUFycmF5WyRwcmltYXJ5X2l0ZW1dIGFzICRzZWNvbmRfaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgJHNlY29uZGFyeV9pZHNbJHNlY29uZF9pdGVtXSA9ICRzZWNvbmRfaXRlbTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7IC8vY3JlYXRlIGRlcGVuZGVuY2llcyBmcm9tIHJlbGF0aW9uIGlmIG5vdCBmcm9tIHZhbGlkYXRlIGVycm9yCiAgICAgICAgICAgICAgZm9yZWFjaCAoJHByaW1hcnlfYXJyYXkgYXMgJHByaW1hcnlfaXRlbSkgewogICAgICAgICAgICAgICAgICBmb3JlYWNoICgkcHJpbWFyeV9pdGVtWyRzZWNvbmRhcnlfZGVwZW5kZW5jeVsnZW50aXR5J11dIGFzICRzZWNvbmRfaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgJHNlY29uZGFyeV9pZHNbJHNlY29uZF9pdGVtWydpZCddXSA9ICRzZWNvbmRfaXRlbVsnaWQnXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgfQoKICAgICAgICAvL2pzb24gZW5jb2RlIG9mIGRlcGVuZGVuY3kgbWF0cml4CiAgICAgICAgJGRlcGVuZGVuY3lKc29uID0ganNvbl9lbmNvZGUoJGRlcGVuZGVuY3lBcnJheSk7CiAgICA/PgoKICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CgogICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXNtLTEyIj4KICAgICAgICAgICAgICA8bGFiZWw+eyEhICRwcmltYXJ5X2RlcGVuZGVuY3lbJ2xhYmVsJ10gISF9PC9sYWJlbD4KICAgICAgICAgICAgICBAaW5jbHVkZSgnY3J1ZDo6ZmllbGRzLmluYy50cmFuc2xhdGFibGVfaWNvbicsIFsnZmllbGQnID0+ICRwcmltYXJ5X2RlcGVuZGVuY3ldKQogICAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0icm93Ij4KCiAgICAgICAgICA8ZGl2IGNsYXNzPSJoaWRkZW5fZmllbGRzX3ByaW1hcnkiIGRhdGEtbmFtZSA9ICJ7eyAkcHJpbWFyeV9kZXBlbmRlbmN5WyduYW1lJ10gfX0iPgogICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgYnAtZmllbGQtbmFtZT0ie3skcHJpbWFyeV9kZXBlbmRlbmN5WyduYW1lJ119fSIgbmFtZT0ie3skcHJpbWFyeV9kZXBlbmRlbmN5WyduYW1lJ119fSIgdmFsdWU9IiIgLz4KICAgICAgICAgIEBpZihpc3NldCgkZmllbGRbJ3ZhbHVlJ10pKQogICAgICAgICAgICAgIEBpZigkb2xkX3ByaW1hcnlfZGVwZW5kZW5jeSkKICAgICAgICAgICAgICAgICAgQGZvcmVhY2goJG9sZF9wcmltYXJ5X2RlcGVuZGVuY3kgYXMgJGl0ZW0gKQogICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBjbGFzcz0icHJpbWFyeV9oaWRkZW4iIG5hbWU9Int7ICRwcmltYXJ5X2RlcGVuZGVuY3lbJ25hbWUnXSB9fVtdIiB2YWx1ZT0ie3sgJGl0ZW0gfX0iPgogICAgICAgICAgICAgICAgICBAZW5kZm9yZWFjaAogICAgICAgICAgICAgIEBlbHNlCiAgICAgICAgICAgICAgICAgIEBmb3JlYWNoKCAkZmllbGRbJ3ZhbHVlJ11bMF0tPnBsdWNrKCdpZCcsICdpZCcpLT50b0FycmF5KCkgYXMgJGl0ZW0gKQogICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBjbGFzcz0icHJpbWFyeV9oaWRkZW4iIG5hbWU9Int7ICRwcmltYXJ5X2RlcGVuZGVuY3lbJ25hbWUnXSB9fVtdIiB2YWx1ZT0ie3sgJGl0ZW0gfX0iPgogICAgICAgICAgICAgICAgICBAZW5kZm9yZWFjaAogICAgICAgICAgICAgIEBlbmRpZgogICAgICAgICAgICBAZW5kaWYKICAgICAgICAgIDwvZGl2PgoKICAgICAgQGZvcmVhY2ggKCRwcmltYXJ5X2RlcGVuZGVuY3lbJ21vZGVsJ106OmFsbCgpIGFzICRjb25uZWN0ZWRfZW50aXR5X2VudHJ5KQogICAgICAgICAgPGRpdiBjbGFzcz0iY29sLXNtLXt7IGlzc2V0KCRwcmltYXJ5X2RlcGVuZGVuY3lbJ251bWJlcl9jb2x1bW5zJ10pID8gaW50dmFsKDEyLyRwcmltYXJ5X2RlcGVuZGVuY3lbJ251bWJlcl9jb2x1bW5zJ10pIDogJzQnfX0iPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmb250LXdlaWdodC1ub3JtYWwiPgogICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IgogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtaWQgPSAie3sgJGNvbm5lY3RlZF9lbnRpdHlfZW50cnktPmlkIH19IgogICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzID0gJ3ByaW1hcnlfbGlzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICBAZm9yZWFjaCAoJHByaW1hcnlfZGVwZW5kZW5jeSBhcyAkYXR0cmlidXRlID0+ICR2YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGlmIChpc19zdHJpbmcoJGF0dHJpYnV0ZSkgJiYgJGF0dHJpYnV0ZSAhPSAndmFsdWUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGlmICgkYXR0cmlidXRlPT0nbmFtZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyAkYXR0cmlidXRlIH19PSJ7eyAkdmFsdWUgfX1fc2hvd1tdIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7ICRhdHRyaWJ1dGUgfX09Int7ICR2YWx1ZSB9fSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBlbmRpZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAZW5kaWYKICAgICAgICAgICAgICAgICAgICAgICAgICBAZW5kZm9yZWFjaAogICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSJ7eyAkY29ubmVjdGVkX2VudGl0eV9lbnRyeS0+aWQgfX0iCgogICAgICAgICAgICAgICAgICAgICAgICAgIEBpZiggKCBpc3NldCgkZmllbGRbJ3ZhbHVlJ10pICYmIGlzX2FycmF5KCRmaWVsZFsndmFsdWUnXSkgJiYgaW5fYXJyYXkoJGNvbm5lY3RlZF9lbnRpdHlfZW50cnktPmlkLCAkZmllbGRbJ3ZhbHVlJ11bMF0tPnBsdWNrKCdpZCcsICdpZCcpLT50b0FycmF5KCkpKSB8fCAkb2xkX3ByaW1hcnlfZGVwZW5kZW5jeSAmJiBpbl9hcnJheSgkY29ubmVjdGVkX2VudGl0eV9lbnRyeS0+aWQsICRvbGRfcHJpbWFyeV9kZXBlbmRlbmN5KSkKICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkID0gImNoZWNrZWQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgQGVuZGlmID4KICAgICAgICAgICAgICAgICAgICAgICAgICB7eyAkY29ubmVjdGVkX2VudGl0eV9lbnRyeS0+eyRwcmltYXJ5X2RlcGVuZGVuY3lbJ2F0dHJpYnV0ZSddfSB9fQogICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgIEBlbmRmb3JlYWNoCiAgICAgIDwvZGl2PgoKICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zbS0xMiI+CiAgICAgICAgICAgICAgPGxhYmVsPnshISAkc2Vjb25kYXJ5X2RlcGVuZGVuY3lbJ2xhYmVsJ10gISF9PC9sYWJlbD4KICAgICAgICAgICAgICBAaW5jbHVkZSgnY3J1ZDo6ZmllbGRzLmluYy50cmFuc2xhdGFibGVfaWNvbicsIFsnZmllbGQnID0+ICRzZWNvbmRhcnlfZGVwZW5kZW5jeV0pCiAgICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgPGRpdiBjbGFzcz0iaGlkZGVuX2ZpZWxkc19zZWNvbmRhcnkiIGRhdGEtbmFtZT0ie3sgJHNlY29uZGFyeV9kZXBlbmRlbmN5WyduYW1lJ10gfX0iPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBicC1maWVsZC1uYW1lPSJ7eyRzZWNvbmRhcnlfZGVwZW5kZW5jeVsnbmFtZSddfX0iIG5hbWU9Int7JHNlY29uZGFyeV9kZXBlbmRlbmN5WyduYW1lJ119fSIgdmFsdWU9IiIgLz4KICAgICAgICAgICAgQGlmKGlzc2V0KCRmaWVsZFsndmFsdWUnXSkpCiAgICAgICAgICAgICAgQGlmKCRvbGRfc2Vjb25kYXJ5X2RlcGVuZGVuY3kpCiAgICAgICAgICAgICAgICBAZm9yZWFjaCgkb2xkX3NlY29uZGFyeV9kZXBlbmRlbmN5IGFzICRpdGVtICkKICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgY2xhc3M9InNlY29uZGFyeV9oaWRkZW4iIG5hbWU9Int7ICRzZWNvbmRhcnlfZGVwZW5kZW5jeVsnbmFtZSddIH19W10iIHZhbHVlPSJ7eyAkaXRlbSB9fSI+CiAgICAgICAgICAgICAgICBAZW5kZm9yZWFjaAogICAgICAgICAgICAgIEBlbHNlCiAgICAgICAgICAgICAgICBAZm9yZWFjaCggJGZpZWxkWyd2YWx1ZSddWzFdLT5wbHVjaygnaWQnLCAnaWQnKS0+dG9BcnJheSgpIGFzICRpdGVtICkKICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgY2xhc3M9InNlY29uZGFyeV9oaWRkZW4iIG5hbWU9Int7ICRzZWNvbmRhcnlfZGVwZW5kZW5jeVsnbmFtZSddIH19W10iIHZhbHVlPSJ7eyAkaXRlbSB9fSI+CiAgICAgICAgICAgICAgICBAZW5kZm9yZWFjaAogICAgICAgICAgICAgIEBlbmRpZgogICAgICAgICAgICBAZW5kaWYKICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIEBmb3JlYWNoICgkc2Vjb25kYXJ5X2RlcGVuZGVuY3lbJ21vZGVsJ106OmFsbCgpIGFzICRjb25uZWN0ZWRfZW50aXR5X2VudHJ5KQogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zbS17eyBpc3NldCgkc2Vjb25kYXJ5X2RlcGVuZGVuY3lbJ251bWJlcl9jb2x1bW5zJ10pID8gaW50dmFsKDEyLyRzZWNvbmRhcnlfZGVwZW5kZW5jeVsnbnVtYmVyX2NvbHVtbnMnXSkgOiAnNCd9fSI+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoZWNrYm94Ij4KICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZm9udC13ZWlnaHQtbm9ybWFsIj4KICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIKICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyA9ICdzZWNvbmRhcnlfbGlzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWlkID0gInt7ICRjb25uZWN0ZWRfZW50aXR5X2VudHJ5LT5pZCB9fSIKICAgICAgICAgICAgICAgICAgICAgICAgICBAZm9yZWFjaCAoJHNlY29uZGFyeV9kZXBlbmRlbmN5IGFzICRhdHRyaWJ1dGUgPT4gJHZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAaWYgKGlzX3N0cmluZygkYXR0cmlidXRlKSAmJiAkYXR0cmlidXRlICE9ICd2YWx1ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGlmICgkYXR0cmlidXRlPT0nbmFtZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyAkYXR0cmlidXRlIH19PSJ7eyAkdmFsdWUgfX1fc2hvd1tdIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyAkYXR0cmlidXRlIH19PSJ7eyAkdmFsdWUgfX0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGVuZGlmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBlbmRpZgogICAgICAgICAgICAgICAgICAgICAgICAgIEBlbmRmb3JlYWNoCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSJ7eyAkY29ubmVjdGVkX2VudGl0eV9lbnRyeS0+aWQgfX0iCgogICAgICAgICAgICAgICAgICAgICAgICAgIEBpZiggKCBpc3NldCgkZmllbGRbJ3ZhbHVlJ10pICYmIGlzX2FycmF5KCRmaWVsZFsndmFsdWUnXSkgJiYgKCAgaW5fYXJyYXkoJGNvbm5lY3RlZF9lbnRpdHlfZW50cnktPmlkLCAkZmllbGRbJ3ZhbHVlJ11bMV0tPnBsdWNrKCdpZCcsICdpZCcpLT50b0FycmF5KCkpIHx8IGlzc2V0KCAkc2Vjb25kYXJ5X2lkc1skY29ubmVjdGVkX2VudGl0eV9lbnRyeS0+aWRdKSkgfHwgJG9sZF9zZWNvbmRhcnlfZGVwZW5kZW5jeSAmJiBpbl9hcnJheSgkY29ubmVjdGVkX2VudGl0eV9lbnRyeS0+aWQsICRvbGRfc2Vjb25kYXJ5X2RlcGVuZGVuY3kpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQgPSAiY2hlY2tlZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBpZihpc3NldCggJHNlY29uZGFyeV9pZHNbJGNvbm5lY3RlZF9lbnRpdHlfZW50cnktPmlkXSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQgPSBkaXNhYmxlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGVuZGlmCiAgICAgICAgICAgICAgICAgICAgICAgICAgQGVuZGlmID4ge3sgJGNvbm5lY3RlZF9lbnRpdHlfZW50cnktPnskc2Vjb25kYXJ5X2RlcGVuZGVuY3lbJ2F0dHJpYnV0ZSddfSB9fQogICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICBAZW5kZm9yZWFjaAogICAgICA8L2Rpdj4KICAgIDwvZGl2Pnt7LS0gLy5jb250YWluZXIgLS19fQoKCiAgICB7ey0tIEhJTlQgLS19fQogICAgQGlmIChpc3NldCgkZmllbGRbJ2hpbnQnXSkpCiAgICAgICAgPHAgY2xhc3M9ImhlbHAtYmxvY2siPnshISAkZmllbGRbJ2hpbnQnXSAhIX08L3A+CiAgICBAZW5kaWYKCkBpbmNsdWRlKCdjcnVkOjpmaWVsZHMuaW5jLndyYXBwZXJfZW5kJykKCnt7LS0gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIC0tfX0Ke3stLSBFeHRyYSBDU1MgYW5kIEpTIGZvciB0aGlzIHBhcnRpY3VsYXIgZmllbGQgLS19fQp7ey0tIElmIGEgZmllbGQgdHlwZSBpcyBzaG93biBtdWx0aXBsZSB0aW1lcyBvbiBhIGZvcm0sIHRoZSBDU1MgYW5kIEpTIHdpbGwgb25seSBiZSBsb2FkZWQgb25jZSAtLX19CgpAcHVzaCgnY3J1ZF9maWVsZHNfc2NyaXB0cycpCiAgICA8c2NyaXB0PgogICAgICAgIHZhciAge3sgJGZpZWxkWydmaWVsZF91bmlxdWVfbmFtZSddIH19ID0geyEhICRkZXBlbmRlbmN5SnNvbiAhIX07CiAgICA8L3NjcmlwdD4KQGVuZHB1c2gKCnt7LS0gRklFTEQgSlMgLSB3aWxsIGJlIGxvYWRlZCBpbiB0aGUgYWZ0ZXJfc2NyaXB0cyBzZWN0aW9uIC0tfX0KQHB1c2goJ2NydWRfZmllbGRzX3NjcmlwdHMnKQogIHt7LS0gaW5jbHVkZSBjaGVja2xpc3RfZGVwZW5kZW5jeSBqcyAtLX19CiAgQGxvYWRPbmNlKCdicEZpZWxkSW5pdENoZWNrbGlzdERlcGVuZGVuY3lFbGVtZW50JykKICAgIDxzY3JpcHQ+CiAgICAgIGZ1bmN0aW9uIGJwRmllbGRJbml0Q2hlY2tsaXN0RGVwZW5kZW5jeUVsZW1lbnQoZWxlbWVudCkgewoKICAgICAgICAgIHZhciB1bmlxdWVfbmFtZSA9IGVsZW1lbnQuZGF0YSgnZW50aXR5Jyk7CiAgICAgICAgICB2YXIgZGVwZW5kZW5jeUpzb24gPSB3aW5kb3dbdW5pcXVlX25hbWVdOwogICAgICAgICAgdmFyIHRoaXNGaWVsZCA9IGVsZW1lbnQ7CiAgICAgICAgICB2YXIgaGFuZGxlQ2hlY2tJbnB1dCA9IGZ1bmN0aW9uKGVsLCBmaWVsZCwgZGVwZW5kZW5jeUpzb24pIHsKICAgICAgICAgICAgbGV0IGlkQ3VycmVudCA9IGVsLmRhdGEoJ2lkJyk7CiAgICAgICAgICAgIC8vYWRkIGhpZGRlbiBmaWVsZCB3aXRoIHRoaXMgdmFsdWUKICAgICAgICAgICAgbGV0IG5hbWVJbnB1dCA9IGZpZWxkLmZpbmQoJy5oaWRkZW5fZmllbGRzX3ByaW1hcnknKS5kYXRhKCduYW1lJyk7CiAgICAgICAgICAgIGlmKGZpZWxkLmZpbmQoJ2lucHV0LnByaW1hcnlfaGlkZGVuW3ZhbHVlPSInK2lkQ3VycmVudCsnIl0nKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICBsZXQgaW5wdXRUb0FkZCA9ICQoJzxpbnB1dCB0eXBlPSJoaWRkZW4iIGNsYXNzPSJwcmltYXJ5X2hpZGRlbiIgbmFtZT0iJytuYW1lSW5wdXQrJ1tdIiB2YWx1ZT0iJytpZEN1cnJlbnQrJyI+Jyk7CgogICAgICAgICAgICAgIGZpZWxkLmZpbmQoJy5oaWRkZW5fZmllbGRzX3ByaW1hcnknKS5hcHBlbmQoaW5wdXRUb0FkZCk7CiAgICAgICAgICAgICAgZmllbGQuZmluZCgnLmhpZGRlbl9maWVsZHNfcHJpbWFyeScpLmZpbmQoJ2lucHV0LnByaW1hcnlfaGlkZGVuW3ZhbHVlPSInK2lkQ3VycmVudCsnIl0nKS50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkLmVhY2goZGVwZW5kZW5jeUpzb25baWRDdXJyZW50XSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7CiAgICAgICAgICAgICAgLy9jaGVjayBhbmQgZGlzYWJsZSBzZWNvbmRpZXMgY2hlY2tib3gKICAgICAgICAgICAgICBmaWVsZC5maW5kKCdpbnB1dC5zZWNvbmRhcnlfbGlzdFt2YWx1ZT0iJyt2YWx1ZSsnIl0nKS5wcm9wKCAiY2hlY2tlZCIsIHRydWUgKTsKICAgICAgICAgICAgICBmaWVsZC5maW5kKCdpbnB1dC5zZWNvbmRhcnlfbGlzdFt2YWx1ZT0iJyt2YWx1ZSsnIl0nKS5wcm9wKCAiZGlzYWJsZWQiLCB0cnVlICk7CiAgICAgICAgICAgICAgZmllbGQuZmluZCgnaW5wdXQuc2Vjb25kYXJ5X2xpc3RbdmFsdWU9IicrdmFsdWUrJyJdJykuYXR0cignZm9yY2VkLXNlbGVjdCcsICd0cnVlJyk7CiAgICAgICAgICAgICAgLy9yZW1vdmUgaGlkZGVuIGZpZWxkcyB3aXRoIHNlY29uZGFyeSBkZXBlbmRlbmN5IGlmIHdhcyBzZXQKICAgICAgICAgICAgICB2YXIgaGlkZGVuID0gZmllbGQuZmluZCgnaW5wdXQuc2Vjb25kYXJ5X2hpZGRlblt2YWx1ZT0iJyt2YWx1ZSsnIl0nKTsKICAgICAgICAgICAgICBpZihoaWRkZW4pCiAgICAgICAgICAgICAgICBoaWRkZW4ucmVtb3ZlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKICAgICAgICAgIAogICAgICAgICAgdGhpc0ZpZWxkLmZpbmQoJ2Rpdi5oaWRkZW5fZmllbGRzX3ByaW1hcnknKS5jaGlsZHJlbignaW5wdXQnKS5maXJzdCgpLm9uKCdDcnVkRmllbGQ6ZGlzYWJsZScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICBsZXQgaW5wdXQgPSAkKGUudGFyZ2V0KTsKICAgICAgICAgICAgICBpbnB1dC5wYXJlbnQoKS5wYXJlbnQoKS5maW5kKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgICAgaW5wdXQuc2libGluZ3MoJ2lucHV0JykuYXR0cignZGlzYWJsZWQnLCdkaXNhYmxlZCcpOwogICAgICAgICAgfSk7CgogICAgICAgICAgdGhpc0ZpZWxkLmZpbmQoJ2Rpdi5oaWRkZW5fZmllbGRzX3ByaW1hcnknKS5jaGlsZHJlbignaW5wdXQnKS5maXJzdCgpLm9uKCdDcnVkRmllbGQ6ZW5hYmxlJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgIGxldCBpbnB1dCA9ICQoZS50YXJnZXQpOwogICAgICAgICAgICAgIGlucHV0LnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykubm90KCdbZm9yY2VkLXNlbGVjdF0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpOwogICAgICAgICAgICAgIGlucHV0LnNpYmxpbmdzKCdpbnB1dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzRmllbGQuZmluZCgnZGl2LmhpZGRlbl9maWVsZHNfc2Vjb25kYXJ5JykuY2hpbGRyZW4oJ2lucHV0JykuZmlyc3QoKS5vbignQ3J1ZEZpZWxkOmRpc2FibGUnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgbGV0IGlucHV0ID0gJChlLnRhcmdldCk7CiAgICAgICAgICAgICAgaW5wdXQucGFyZW50KCkucGFyZW50KCkuZmluZCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpOwogICAgICAgICAgICAgIGlucHV0LnNpYmxpbmdzKCdpbnB1dCcpLmF0dHIoJ2Rpc2FibGVkJywnZGlzYWJsZWQnKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXNGaWVsZC5maW5kKCdkaXYuaGlkZGVuX2ZpZWxkc19zZWNvbmRhcnknKS5jaGlsZHJlbignaW5wdXQnKS5maXJzdCgpLm9uKCdDcnVkRmllbGQ6ZW5hYmxlJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgIGxldCBpbnB1dCA9ICQoZS50YXJnZXQpOwogICAgICAgICAgICAgIGlucHV0LnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykubm90KCdbZm9yY2VkLXNlbGVjdF0nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpOwogICAgICAgICAgICAgIGlucHV0LnNpYmxpbmdzKCdpbnB1dCcpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzRmllbGQuZmluZCgnLnByaW1hcnlfbGlzdCcpLmVhY2goZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBjaGVja2JveCA9ICQodGhpcyk7CiAgICAgICAgICAgIC8vIHJlLWNoZWNrIHRoZSBzZWNvbmRhcnkgYm94ZXMgaW4gY2FzZSB0aGUgcHJpbWFyeSBpcyByZS1jaGVja2VkIGZyb20gb2xkLgogICAgICAgICAgICBpZihjaGVja2JveC5pcygnOmNoZWNrZWQnKSl7CiAgICAgICAgICAgICAgIGhhbmRsZUNoZWNrSW5wdXQoY2hlY2tib3gsIHRoaXNGaWVsZCwgZGVwZW5kZW5jeUpzb24pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBjaGFuZ2UgZXZlbnQgdG8gaGFuZGxlIHN1YnNxdWVudCBjaGVja2JveCBzdGF0ZSBjaGFuZ2VzLgogICAgICAgICAgICBjaGVja2JveC5jaGFuZ2UoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICBpZihjaGVja2JveC5pcygnOmNoZWNrZWQnKSl7CiAgICAgICAgICAgICAgICBoYW5kbGVDaGVja0lucHV0KGNoZWNrYm94LCB0aGlzRmllbGQsIGRlcGVuZGVuY3lKc29uKTsKICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGxldCBpZEN1cnJlbnQgPSBjaGVja2JveC5kYXRhKCdpZCcpOwogICAgICAgICAgICAgICAgLy9yZW1vdmUgaGlkZGVuIGZpZWxkIHdpdGggdGhpcyB2YWx1ZS4KICAgICAgICAgICAgICAgIHRoaXNGaWVsZC5maW5kKCdpbnB1dC5wcmltYXJ5X2hpZGRlblt2YWx1ZT0iJytpZEN1cnJlbnQrJyJdJykucmVtb3ZlKCk7CgogICAgICAgICAgICAgICAgLy8gdW5jaGVjayBhbmQgYWN0aXZlIHNlY29uZGFyeSBjaGVja2JveHMgaWYgYXJlIG5vdCBpbiBvdGhlciBzZWxlY3RlZCBwcmltYXJ5LgogICAgICAgICAgICAgICAgdmFyIHNlY29uZGFyeSA9IGRlcGVuZGVuY3lKc29uW2lkQ3VycmVudF07CgogICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gW107CiAgICAgICAgICAgICAgICB0aGlzRmllbGQuZmluZCgnaW5wdXQucHJpbWFyeV9oaWRkZW4nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgaW5wdXQpewogICAgICAgICAgICAgICAgICBzZWxlY3RlZC5wdXNoKCAkKHRoaXMpLnZhbCgpICk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAkLmVhY2goc2Vjb25kYXJ5LCBmdW5jdGlvbihpbmRleCwgc2Vjb25kYXJ5SXRlbSl7CiAgICAgICAgICAgICAgICAgIHZhciBvayA9IDE7CgogICAgICAgICAgICAgICAgICAkLmVhY2goc2VsZWN0ZWQsIGZ1bmN0aW9uKGluZGV4Miwgc2VsZWN0ZWRJdGVtKXsKICAgICAgICAgICAgICAgICAgICBpZiggZGVwZW5kZW5jeUpzb25bc2VsZWN0ZWRJdGVtXS5pbmRleE9mKHNlY29uZGFyeUl0ZW0pICE9IC0xICl7CiAgICAgICAgICAgICAgICAgICAgICBvayA9MDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgaWYob2spewogICAgICAgICAgICAgICAgICAgIHRoaXNGaWVsZC5maW5kKCdpbnB1dC5zZWNvbmRhcnlfbGlzdFt2YWx1ZT0iJytzZWNvbmRhcnlJdGVtKyciXScpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpc0ZpZWxkLmZpbmQoJ2lucHV0LnNlY29uZGFyeV9saXN0W3ZhbHVlPSInK3NlY29uZGFyeUl0ZW0rJyJdJykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpc0ZpZWxkLmZpbmQoJ2lucHV0LnNlY29uZGFyeV9saXN0W3ZhbHVlPSInK3NlY29uZGFyeUl0ZW0rJyJdJykucmVtb3ZlQXR0cignZm9yY2VkLXNlbGVjdCcpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CgoKICAgICAgICAgIHRoaXNGaWVsZC5maW5kKCcuc2Vjb25kYXJ5X2xpc3QnKS5jbGljayhmdW5jdGlvbigpewoKICAgICAgICAgICAgdmFyIGlkQ3VycmVudCA9ICQodGhpcykuZGF0YSgnaWQnKTsKICAgICAgICAgICAgaWYoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSl7CiAgICAgICAgICAgICAgLy9hZGQgaGlkZGVuIGZpZWxkIHdpdGggdGhpcyB2YWx1ZQogICAgICAgICAgICAgIHZhciBuYW1lSW5wdXQgPSB0aGlzRmllbGQuZmluZCgnLmhpZGRlbl9maWVsZHNfc2Vjb25kYXJ5JykuZGF0YSgnbmFtZScpOwogICAgICAgICAgICAgIHZhciBpbnB1dFRvQWRkID0gJCgnPGlucHV0IHR5cGU9ImhpZGRlbiIgY2xhc3M9InNlY29uZGFyeV9oaWRkZW4iIG5hbWU9IicrbmFtZUlucHV0KydbXSIgdmFsdWU9IicraWRDdXJyZW50KyciPicpOwoKICAgICAgICAgICAgICB0aGlzRmllbGQuZmluZCgnLmhpZGRlbl9maWVsZHNfc2Vjb25kYXJ5JykuYXBwZW5kKGlucHV0VG9BZGQpOwoKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgLy9yZW1vdmUgaGlkZGVuIGZpZWxkIHdpdGggdGhpcyB2YWx1ZQogICAgICAgICAgICAgIHRoaXNGaWVsZC5maW5kKCdpbnB1dC5zZWNvbmRhcnlfaGlkZGVuW3ZhbHVlPSInK2lkQ3VycmVudCsnIl0nKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICB9CiAgICA8L3NjcmlwdD4KICBAZW5kTG9hZE9uY2UKQGVuZHB1c2gKe3stLSBFbmQgb2YgRXh0cmEgQ1NTIGFuZCBKUyAtLX19Cnt7LS0gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIC0tfX0KIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";